<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Network | Cying</title><meta name="description" content="Network"><meta name="keywords" content="Network"><meta name="author" content="Cying"><meta name="copyright" content="Cying"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Network"><meta name="twitter:description" content="Network"><meta name="twitter:image" content="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1576944146129&amp;di=228d10d69063226d2ebced963c1f97de&amp;imgtype=jpg&amp;src=http%3A%2F%2Fimg4.imgtn.bdimg.com%2Fit%2Fu%3D1735485149%2C3987070624%26fm%3D214%26gp%3D0.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Network"><meta property="og:url" content="http://yoursite.com/2019/12/21/Network/"><meta property="og:site_name" content="Cying"><meta property="og:description" content="Network"><meta property="og:image" content="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1576944146129&amp;di=228d10d69063226d2ebced963c1f97de&amp;imgtype=jpg&amp;src=http%3A%2F%2Fimg4.imgtn.bdimg.com%2Fit%2Fu%3D1735485149%2C3987070624%26fm%3D214%26gp%3D0.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://yoursite.com/2019/12/21/Network/"><link rel="prev" title="Operating-Systems" href="http://yoursite.com/2019/12/28/Operating-Systems/"><link rel="next" title="Unity And Vuforia" href="http://yoursite.com/2019/12/14/Unity-And-Vuforia/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight_copy: 'false',
  highlight_lang: 'false',
  highlight_shrink: 'false',
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: undefined,
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script><meta name="generator" content="Hexo 4.1.1"></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Cying</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div></div></span><span class="pull_right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="https://profile.csdnimg.cn/6/B/F/1_cyingk" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">6</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">6</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1576225629919&amp;di=7ba0d070eae2f9b4c47dbc594874f4b5&amp;imgtype=0&amp;src=http%3A%2F%2Fb.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F738b4710b912c8fcf25c5682ff039245d78821d5.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">Network</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-12-21</time><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon" aria-hidden="true"></i><span>Word count: </span><span class="word-count">30.9k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon" aria-hidden="true"></i><span>Reading time: 96 min</span><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>Post View: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><p>*</p>
<p>一、基本知识<br>1.1.计算机网络的概念<br>使一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递。是互联的、自治计算机集合</p>
<p>1.2.计算机网络的功能<br>数据通信Data Communicaions – 连通性</p>
<p>资源共享Resource Sharing – 硬件、软件、数据</p>
<p>分布式处理 – 多台计算机各自承担同一工作任务的不同部分</p>
<p>提高可靠性</p>
<p>负载均衡</p>
<p>1.3.计算机网络的组成<br>1.3.1 - 组成部分<br>硬件Hardware、软件Software、协议Protocol</p>
<p>1.3.2 - 工作方式<br>边缘部分 – 用户直接使用</p>
<p>C/S方式</p>
<p>P2P 方式</p>
<p>核心部分 – 为边缘部分服务</p>
<p>1.3.3 - 功能组成<br>通信子网Communication  Subnet– 实现数据通信</p>
<p>应用层、表示层、会话层</p>
<p>资源子网Resource Subnet – 实现资源共享/数据处理</p>
<p>网络层、数据链路层、物理层</p>
<p>1.4.计算机网络的分类<br>1.4.1 - 按分布范围分<br>广域网 WAN</p>
<p>城域网 MAN</p>
<p>局域网 LAN</p>
<p>个人局域网 PAN</p>
<p>1.4.2 - 按使用者分<br>专用网</p>
<p>公用网</p>
<p>1.4.3 - 按交换技术分<br>电路交换</p>
<p>报文交换</p>
<p>分组交换</p>
<p>1.4.4 - 按拓扑结构<br>总线型</p>
<p>星型</p>
<p>环型</p>
<p>网状型</p>
<p>1.4.5 - 按传输技术分<br>广播式网络 – 共享公共通信信道</p>
<p>点对点网络 – 使用分组存储转发和路由选择机制</p>
<p>1.5.计算机网络的性能指标<br>1.5.1 - 速率<br>即数据率或数据传输率或比特率</p>
<p>1.5.2 - 带宽<br>原本指某个信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹 Hz，在计算机网络中，用来表示网络的通信线路传送数据的能力，通常是指单位时间内从网络中的某一点到另一点所能通过的最高数据率。单位是比特每秒，b/s，kb/s，Mb/s，Gb/s</p>
<p>1.5.3 - 吞吐量<br>表示在单位时间内通过某个网络（或信道/接口）的数据量，受网络的带宽和网络的额定速率的限制</p>
<p>1.5.4 - 时延<br>指数据（报文/分组/比特流）从网络的一端传送到另一端所需的时间。也叫延迟或迟延，单位是s</p>
<p>发送时延</p>
<p>从主机上将数据全部放在信道上所需的时间</p>
<p>传播时延</p>
<p>是数据在信道中传输所需的时间</p>
<p>排队时延</p>
<p>在路由器转发中所等待的时间</p>
<p>处理时延</p>
<p>路由器在对数据进行检错等处理时所需的时间</p>
<p>1.5.5 - 时延带宽积<br>又称比特为单位的链路长度，某段链路现在有多少比特。– 时延带宽积（bit） = 传播时延（s） × 带宽（b/s）</p>
<p>1.5.6 - 往返时延RTT<br>从发送方发送数据开始，到发送方收到接收方的确认（接收方收到数据后立刻发送确认），总经历的时延，RTT越大，在收到确认之前可以发送的数据越多</p>
<p>往返传播时延 = 传播时延 × 2</p>
<p>末端处理时间</p>
<p>1.5.7 - 利用率<br>信道利用率</p>
<p>网络利用率</p>
<p>二、分层结构<br>发送文件前要完成的工作<br>发起通信的计算机必须将数据通信的通路进行激活</p>
<p>要告诉网络如何识别目的主机</p>
<p>发起通信的计算机要查明目的主机是否开机，并且与网络连接正常</p>
<p>发起通信的计算机要弄清楚，对方计算机中的文件管理程序是否已经做好准备工作</p>
<p>确保差错和意外可以解决</p>
<p>2.1.为什么要分层？<br>从发送文件前要完成的工作中可以感受到，任务比较多、杂，所以就有了分层的概念</p>
<p>2.2.分层的基本原则<br>各层之间相互独立，每层只实现一种相对独立的功能</p>
<p>每层之间界限自然清晰，易于理解，相互交流尽可能少</p>
<p>结构上可以分隔开，每层都采用最合适的技术来实现</p>
<p>保持下层对上层的独立性，下层向上层提供服务，上层使用下层所提供的服务</p>
<p>整个分层结构应该能促进标准化工作</p>
<p>2.3.分层的专用术语<br>2.3.1 - 实体<br>第n层中的活动元素称为n层实体，同一层的实体叫对等实体</p>
<p>2.3.2 - 协议<br>为进行网络中的对等实体数据交换而建立的规则、标准或规定成为网络协议</p>
<p>语法 – 规定传输数据的格式</p>
<p>语义 – 规定所要完成的功能</p>
<p>同步 – 规定各种操作的顺序</p>
<p>上层使用下层服务的入口</p>
<p>2.3.3 - 服务<br>下层为相邻上层提供的功能调用</p>
<p>2.3.4 - 协议数据单元 PDU<br>对等层之间传送的数据单元 PDU = PCI + SDU</p>
<p>服务数据单元SDU：为完成用户所要求的功能而应传送的数据</p>
<p>协议控制信息PCI：控制协议操作的信息</p>
<p>2.4.OSI参考模型<br>目的：支持异构网络系统的互联互通</p>
<p>国际标准化组织（ISO)于1984年提出开放系统互连（OSI）参考模型</p>
<p>2.4.1- 应用层Application Layer<br>所有能和用户交互产生网络流量的程序</p>
<p>典型的服务：</p>
<p>文件传输 – FTP</p>
<p>电子邮件 – SMTP</p>
<p>万维网 – HTTP</p>
<p>2.4.2 - 表示层Presentation Layer<br>用于处理在两个通信系统中交换信息的表示方式（语法和语义）</p>
<p>功能： </p>
<p>数据格式变换</p>
<p>数据加密解密</p>
<p>数据压缩恢复</p>
<p>2.4.3 - 会话层Session Layer<br>向表示层实体/用户进程提供建立连接并在连接上有序地传输数据，这是会话，也是建立同步（SYN）</p>
<p>功能： </p>
<p>建立、管理、终止会话</p>
<p>使用校验点可使会话在通信失效时从校验点/同步点继续恢复通信，实现数据同步</p>
<p>主要协议： </p>
<p>ADSP</p>
<p>ASP</p>
<p>2.4.4 - 传输层Transport Layer<br>负责主机中两个进程的通信，即端到端的通信。传输单位是报文段或用户数据报</p>
<p>功能： </p>
<p>可靠传输、不可靠传输</p>
<p>差错控制</p>
<p>流量控制</p>
<p>复用分用</p>
<p>复用 – 多个应用进程可同时使用下面传输层的服务</p>
<p>分用 – 运输层把收到的信息分别交付给上面的应用层中相应的进程</p>
<p>主要协议：</p>
<p>TCP</p>
<p>UDP</p>
<p>2.4.5 - 网络层Network Layer<br>主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务。网络层传输单位是数据报</p>
<p>功能：</p>
<p>路由选择</p>
<p>流量控制</p>
<p>差错控制</p>
<p>拥塞控制</p>
<p>主要协议</p>
<p>IP</p>
<p>IPX</p>
<p>ICMP</p>
<p>IGMP</p>
<p>ARP</p>
<p>RARP</p>
<p>OSPF</p>
<p>2.4.6 - 数据链路层Datalink Layer<br>主要任务是把网络层传下来的数据报组装成帧。</p>
<p>功能：</p>
<p>成帧（定义帧的开始和结束）</p>
<p>差错控制</p>
<p>流量控制</p>
<p>访问控制 – 控制对信道的访问</p>
<p>主要协议：</p>
<p>SDLC</p>
<p>HDLC</p>
<p>PPP</p>
<p>STP</p>
<p>2.4.7 - 物理层Physical Layer<br>主要任务就是在物理媒体上实现比特流的透明传输（不管所传的是什么样的比特组合，都应当能够在链路上传送），传输单位是bit</p>
<p>功能：</p>
<p>定义接口特性</p>
<p>定义传输模式</p>
<p>单工</p>
<p>半双工</p>
<p>双工</p>
<p>定义传输速率</p>
<p>比特同步</p>
<p>比特编码</p>
<p>主要协议：</p>
<p>RJ45</p>
<p>802.3</p>
<p>2.5.TCP/IP模型<br>与OSI参考模型的相同点<br>都分层</p>
<p>基于独立的协议栈的概念</p>
<p>可以实现异构网络的互联</p>
<p>与OSI参考模型的不同点<br>OSI定义了三点：服务、协议、接口</p>
<p>OSI先出现，参考模型先于协议出现，不偏向特定协议</p>
<p>TCP/IP设计之初就考虑到异构互联网的问题，将IP作为重要层次</p>
<p>OSI    TCP/IP<br>网络层    无连接+面向连接    无连接<br>传输层    面向连接    无连接+面向连接<br>2.5.1 - 应用层Application Layer<br>应用层对应用程序的通信提供服务</p>
<p>应用层协议定义：</p>
<p>应用进程交换的报文类型，请求还是响应</p>
<p>各种报文类型的语法，如报文中的各个字段及其详细描述</p>
<p>字段的语义，即包含在字段中的信息的含义</p>
<p>进程何时，如何发送报文，以及对报文进行响应的规则</p>
<p>主要功能：</p>
<p>文件传输、访问和管理</p>
<p>电子邮件</p>
<p>虚拟终端</p>
<p>查询服务和远程作业登录</p>
<p>2.5.2 - 传输层Transport Layer<br>为应用层提供通信服务，使用网络层的服务</p>
<p>主要功能：</p>
<p>传输层提供进程和进程之间的逻辑通信</p>
<p>复用和分用</p>
<p>对收到的报文进行差错检测</p>
<p>传输层的两种协议</p>
<p>2.5.3 - 网络层Network Layer<br>主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务。</p>
<p>传输单位：数据报</p>
<p>功能：</p>
<p>路由选择与分组转发</p>
<p>异构网络互联</p>
<p>拥塞控制</p>
<p>开环控制</p>
<p>闭环控制</p>
<p>2.5.4 - 数据链路层 Datalink Layer<br>负责通过一条链路从一个结点向另一个物理链路直接相连的相邻结点传送数据报</p>
<p>再物理层提供服务的基础上，向网络层提供服务，其最基本的服务是将源自于网络层来的数据可靠地传输到相邻结点地目的网络层。其主要作用是加强物理层传输原始比特流地功能，将物理层提供地可能出错地物理连接改造成为逻辑上无差错地数据链路，使之对网络层表现为一条无差错地链路</p>
<p>2.5.5 - 物理层Physical Layer<br>解决如何在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。</p>
<p>主要任务：</p>
<p>确定与传输媒体接口有关的一些特性</p>
<p>机械特性：定义物理连接的特性，规定物理连接时所采用的规格、接口形状、引线数目、引脚数量和排列情况</p>
<p>电器特性：规定传输二进制位时，线路上信号的电压范围、阻抗匹配、传输速率和距离限制等</p>
<p>功能特性：指明某条线上出现的某一电平表示的含义，接口不见的信号线的用途</p>
<p>规程特性：（过程）定义各条物理线路的工作规程和时序关系</p>
<p>三、物理层<br>3.1.数据通信的基础知识<br>通信的目的是传送消息</p>
<p>3.1.1 - 专用名词<br>3.1.1.1.数据<br>传送信息的实体，通常是有意义的符号序列</p>
<p>3.1.1.2.信号<br>数据的电气/电磁的表现，是数据在传输过程中的存在形式</p>
<p>数字信号：代表消息的参数取值是离散的</p>
<p>模拟信号：代表消息的参数取值是连续的</p>
<p>3.1.1.3.信源<br>产生和发送数据的源头</p>
<p>3.1.1.4.信宿<br>接收数据的终点</p>
<p>3.1.1.5.信道<br>信号的传输媒介。一般用来表示向某一个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接收信道</p>
<p>传输信号 – 模拟信道、数字信道 </p>
<p>传输介质 – 无线信道、有线信道</p>
<p>3.1.2 - 三种通信方式<br>3.1.2.1.单工通信<br>只有一个方向的通信，而没有反方向的交互，只需要一条信道</p>
<p>3.1.2.2.半双工通信<br>通信的双方都可以发送或接收信息，但任何一方都不能同时发送和接收，需要两条信道</p>
<p>3.1.2.3.全双工通信<br>通信双方可以同时发送和接收信息，也需要两条信道</p>
<p>3.1.3 - 两种数据传输方式<br>3.1.3.1.串行传输<br>8个比特排好队，一个一个的到达接收端</p>
<p>速度慢，费用低，适合远距离，只需1条线</p>
<p>3.1.3.2.并行传输<br>8个比特可以同时到达接收端</p>
<p>速度快，费用高，适合近距离，需要8条线</p>
<p>3.2.码元、波特、速率、带宽<br>3.2.1 - 码元<br>码元指一个固定时长的信号波形（数字脉冲），代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为k进制码元，而该时长成为码元宽度。当码元的离散状态有M个时（M大于2），此时码元为M进制码元。</p>
<p>M进制码元：一般为二进制码元，每个码元代表1bit。高电平表示1，低电平表示0。也有更高进制的码元，比如四进制码元，每个码元代表2bit。00是电平最低的，01稍微高一点，10再高一点，11是电平最高的时候</p>
<p>3.2.2 - 速率<br>也叫数据率，是指数据的传输速率，表示单位时间内传输的数据量，可以用码元传输速率和信息传输速率表示</p>
<p>码元传输速率：</p>
<p>别名码元速率/波形速率/调制速率/符号速率，他表示单位时间内数字通信系统所传输的码元个数（也可以称脉冲个数或信号变化的次数）。简单来说就是1s内可以传输多少个码元</p>
<p>单位是波特Baud（1Baud=1码元/s），1波特表示数字通信系统每秒传输一个码元。</p>
<p>这里的码元可以是多进制的，也可以是二进制的，但码元速率与进制无关，就是说，码元就是一个电平嘛，一个电平代表1bit也是那么久，代表2bit也是那么久</p>
<p>信息传输速率：</p>
<p>别名信息速率/比特率，表示单位时间内数字通信系统传输的二进制码元个数（比特数），简单来说就是1s可以传输多少个比特</p>
<p>单位是比特/秒bit/s</p>
<p>两者关系：</p>
<p>当1Baud携带1bit的数据时，则5Baud的码元传输速率所对应的信息传输速率为 5×1=5bit/s</p>
<p>当1Baud携带2bit的数据时，则5Baud的码元传输速率所对应的信息传输速率为 5×2=10bit/s</p>
<p>3.2.3 - 带宽<br>表示再单位时间内从网络中的某一点到另一点所能通过的最高数据率，常用来表示网络的通信线路所能传输数据的能力。单位是b/s</p>
<p>3.2.4 - 练习<br>某一数字通信系统传输的是四进制码元，4s传输了8000个码元，求系统的码元传输速率是多少？信息传输速率是多少？若另一通信系统传输的是十六进制码元，6s传输了7200个码元，求他的码元传输速率是多少？信息传输速率是多少？并指出哪个系统传输速率快？</p>
<p>码元传输速率：8000/4=2000Baud</p>
<p>信息传输速率：2000*2=4000b/s</p>
<p>码元传输速率：7200/6=1200Baud</p>
<p>信息传输速率：1200*4=4800b/s</p>
<p>3.3.奈氏准则和香农定理<br>失真：影响失真程度的因素：码元传输速率、信号传输距离、噪声干扰和传输媒介质量</p>
<p>码间串扰：接收端收到的信号波形失去了码元之间清晰界限的现象</p>
<p>3.3.1 - 奈氏准则（奈奎斯特定理）<br>在理想低通（无噪声、带宽受限）条件下，为了避免码间串扰，极限码元传输速率为2W Baud，W是信道带宽，单位是赫兹Hz</p>
<p>理想低通信道下的极限数据传输率 = 2Wlog2 V （b/s）</p>
<p>V – 几种/几进制码元</p>
<p>在任何信道中，码元传输速率是有上限的。若传输速率超过此上线，就会出现严重的码间串扰问题，使接收端对码元的完全识别成为不可能的。</p>
<p>信道的频带越宽（即能够通过的信号高频分量越多），就可以用更高的速率进行码元的有效传输</p>
<p>奈氏准则给出了码元传输速率的限制，但并没有对信息传输速率给出限制</p>
<p>由于码元的传输速率受奈氏准则的制约，所以要提高数据的传输速率，就必须设法使每个码元能携带更多的比特信息量，这就需要采用多元制的调制方法。</p>
<p>练习<br>在无噪声的情况下，若某通信链路的带宽为3kHz，采用4个相位，每个相位具有4种振幅的QAM调制技术，则该通信链路的最大数据传输率是多少？</p>
<p>信号有 4种振幅 × 4个相位 = 16进制</p>
<p>1Baud携带的 4bit的数据</p>
<p>则最大数据传输率 = 2 * 4000 * 4 = 24000 b/s</p>
<p>3.3.2 - 香农定理<br>噪声存在于所有的电子设备和通信信道中。由于噪声随机产生，他的瞬时值有时会很大，因此噪声会使接收端对码元的判断产生错误。但是噪声的影响是相对的，若信号较强，那么噪声影响相对较小。因此，信噪比就很重要。</p>
<p>信噪比 = 信号的平均功率/噪声的平均功率，常记为S/N，并用dB作为度量单位</p>
<p>信噪比 = 10log10（S/N）</p>
<p>香农定理就是在带宽受限且有噪声的信道中，为了不产生误差，信息传输速率有上限值</p>
<p>信道中的极限数据传输速率 = Wlog2（1+S/N）（b/s）</p>
<p>W – 带宽</p>
<p>S/N – 信噪比</p>
<p>信道中的带宽或信道中的信噪比越大，信息的极限传输速率就越高</p>
<p>对一定的传输带宽和一定的信噪比，信息传输速率的上限就确定了</p>
<p>只要信息的传输速率低于信道的极限传输速率，就一定能找到某种方法来实现无差错传输</p>
<p>香农定理得出的极限信息传输速率，实际信道能达到的传输速率比它低不少</p>
<p>从香农定理中可以看出，若信道带宽W或信噪比S/N没有上限（不可能），那么信道的极限信息传输速率也就没有上限</p>
<p>练习<br>电话系统的典型参数是信道带宽为3000Hz ，信噪比为30dB，则该系统最大据传输速率是多少？</p>
<p>30dB = 10log10（S/N）</p>
<p>则S/N = 1000</p>
<p>信息的极限数据传输速率=Wlog2（1+S/N） = 3000 × log2（1+1000）= 30000b/s</p>
<p>​<br>奈氏准则    香农定理<br>带宽受限无噪声条件下，为了避免码间串扰，码元传输速率上限为 2Baud    带宽首受限有噪声条件下的信息传输速率<br>理想低通信道下的极限数据传输率 = 2Wlog2V    信道的极限数据传输率 = Wlog2（1+S/N）<br>要想提高数据率，就要提高带宽/采用更好的编码技术    要想提高数据率，就要提高带宽/信噪比<br>​<br>练习<br>二进制信号在信噪比为127：1的4kHz信道上传输，最大的数据传输速率可达到多少？</p>
<p>奈奎斯特：2 × 4000 × log2 2 = 8000 b/s</p>
<p>香农定理：4000 × *log2（1+127） = 28000b/s</p>
<p>选较小的即 8000b/s</p>
<p>3.4.编码与调制<br>信道：信号传输的媒介。一般用来表示向某一个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接收信道</p>
<p>传输信号</p>
<p>模拟信道</p>
<p>数字信道</p>
<p>传输介质</p>
<p>有线信道</p>
<p>无线信道</p>
<p>基带信号 – 是来自信源的信号，直接表达了要传输的信息的信号。将数字信号1和0直接用两种不同的电压表示，再送到数字信道上传输。（基带传输）</p>
<p>宽带信号 – 是把基带信号经过载波调制后，把信号的频率范围搬移到较高的频段，以便在信道中传输。将基带信号进行调制后形成的频分复用模拟信号，再传送到模拟信道上去（宽带传输）</p>
<p>在传输距离较近时，计算机网络采用基带传输，近距离衰减小，从而信号内容不易发生变化。反之则采用宽带传输</p>
<p>数字数据    –    数字信号    （编码，数字发送器）</p>
<p>数字数据    –    模拟型号    （调制，调制器）</p>
<p>模拟数据    –    数字信号    （编码，PCM编码器）</p>
<p>模拟数据    –    模拟信号    （调制，放大器调制器）</p>
<p>3.4.1 - 数字 To 数字<br>3.4.1.1.非归零编码NRZ<br>高电平为 1 ，低电平为 0</p>
<p>编码容易实现，但是没有检错功能，且无法判断一个码元的开始和结束，以至于收发双方难以保持同步</p>
<p>3.4.1.2.归零编码RZ<br>信号电平在一个码元之内都要恢复到 0 的编码方式</p>
<p>3.4.1.3.反向不归零编码NRZI<br>信号电平翻转表示 1 ，信号电平不变表示 1 </p>
<p>3.4.1.4.曼彻斯特编码<br>将一个码元分成两个相等的间隔</p>
<p>前一个间隔为低电平，后一个间隔为高电平表示 1，码元 0 则正好相反</p>
<p>也可以采用相反的规定</p>
<p>特点是在每一个码元的中间出现电平跳变，位于中间的跳变记作时钟信号（可用于同步），又作数据信号</p>
<p>所占的频带宽度是原始几代宽度的两倍</p>
<p>3.4.1.5.差分曼彻斯特编码<br>常用于局域网传输</p>
<p>若码元为 1，则前半个码元的电平与上一个码元的后半个码元相同，若为 0，则相反。</p>
<p>特点是在每个码元的中间都有一次电平的跳转，可以实现子同步，且抗干扰性强于曼彻斯特编码</p>
<p>3.4.1.6.4B/5B编码<br>比特流中插入额外的比特来打破一连串的 0 或 1，就是用 5 个比特来编码 4 个比特的数据，之后再传给接收方，因此称为 4B/5B。编码效率为 80%</p>
<p>3.4.2 - 数字 To 模拟<br>数字数据调制技术在发送端将数字信号装换位模拟信号。在接收端将模拟信号还原成数字信号，分别对应于调制解调器的调制和解调</p>
<p>3.4.2.1.调幅ASK<br>有波动表示 1，无波动表示 0</p>
<p>3.4.2.2.调频FSK<br>波峰密集表示 1，稀疏表示 1</p>
<p>3.4.2.3.调相PSK<br>1 和 0 分别对应余弦或正弦</p>
<p>3.4.2.4.调幅+调相QAM<br>练习<br>某通信链路的波特率是 1200Baud，采用 4 个相位，每个相位 4 种振幅的QAM调制技术，则该链路的信息传输速率为多少</p>
<p>4 个相位 × 4 种振幅 = 16 进制</p>
<p>1200 × 4 = 4800 b/s</p>
<p>3.4.3 - 模拟 To 数字<br>计算机内部处理的是二进制数据，处理的都是数字音频，所以需要将模拟音频通过采样、量化转换成有限个数字表示的离散序列</p>
<p>最典型的例子就是对音频信号进行编码的脉码调制（PCM），在计算机应用中，能够达到最高保真水平的就是PCM编码，被广泛用于素材保存及音乐欣赏，CD，DVD以及我们常见的WAV文件中均有应用。主要包括抽样、量化、编码</p>
<p>3.4.3.1.抽样<br>对模拟型号周期性扫描，把时间上连续的信号变成时间上离散的信号。为了使所得的离散信号能无失真地代表被抽样地模拟数据，要使用定理进行采样</p>
<p>f采样频率  大于等于  f信号最高频率</p>
<p>3.4.3.2.量化<br>把抽样取得地电平幅值按照一定的分级标度转化为对应的数字值，并取整数，这就是把连续的电平幅值转换为离散的数字量</p>
<p>3.4.3.3.编码<br>把量化的结果转换为与之对应的二进制编码</p>
<p>3.4.4 - 模拟 To 模拟<br>为了实现传输的有效性，有可能需要较高的频率。这种调制方式还可以使用频分复用技术，充分利用带宽资源。在电话机和本地交换机所传输的信号是采用模拟信号传输模拟数据的方式，模拟的声音数据是加载到模拟的载波信号中传输的</p>
<p>3.5.传输介质及分类<br>传输介质也称传输媒体/传输媒介，它就是数据传输系统中在发送设备和接收设备这几件的物理通路。传输媒体并不是物理层。</p>
<p>传输媒体在物理层的下面，因为物理层体系结构的第一层，因此有时称传输媒体为 0 层。在传输媒体中传输的是信号，但传输媒体并不知道所传输的信号代表什么意思。但物理层规定了电气特性，因此能够识别所传送的比特流。</p>
<p>3.5.1 - 传输介质<br>3.5.1.1.导向性传输介质<br>电磁波被导向沿着固体媒介（铜线/光纤）传播</p>
<p>3.5.1.1.1.双绞线<br>是最古老、又最常用的传输介质，由两根采用一定规则并排绞合、相互绝缘的铜导线组成，在局域网和传统电话网中普遍使用。模拟传输的数字传输都可以使用双绞线，其通信距离一般为几十到数十公里。距离太远时，对于模拟传输，要用放大器放大衰减的信号，对于数字传输要用中继器将失真的信号整形</p>
<p>非屏蔽双绞线UTP – 保护层、绝缘层、铜线</p>
<p>屏蔽双绞线STP – 保护层、屏蔽层、绝缘层、铜线</p>
<p>3.5.1.1.2.同轴电缆<br>由导体铜质芯线、绝缘层、网状编织屏蔽层、塑料外层构成。按特性阻抗数值的不同，通常将同轴电缆分为两类：</p>
<p>50Ω同轴电缆 – 主要用于传送基带数字信号，又称为基带同轴电缆，应用于局域网</p>
<p>75Ω同轴电缆 – 主要用于传送宽带信号，又称为宽带同轴电缆，应用于有线电视系统</p>
<p>3.5.1.1.3.光纤<br>就是利用光导纤维（简称光纤）传递光脉冲来进行通信。有光脉冲表示 1，无光脉冲表示。而可见光的频率大约是108 MHz，因此光纤通信系统的宽带远远大于目前其他各种传输媒体的带宽。</p>
<p>在发送端有光源，可以采用发光二极管或半导体激光器，它们在电脉冲作用下能产生出光脉冲，在接收端用广电二极管做成光检测器，在检测到光脉冲时可还原出电脉冲</p>
<p>主要由实心的纤芯和包层构成，光波通过纤芯进行传到，包层较纤芯有较低的折射率。当光纤从高折射率的介质射向低折射率的介质时，其折射角将大于入射角。因此，如果入射角足够大，就会出现全反射，即光线碰到包层的时候会折射回纤芯，这个过程不断重复，光也就沿着光纤传输下去</p>
<p>多模光纤，可以同时传输多个光信号，但是容易受各种因素印象·影响导致输出与输入有差异，所以适合近距离传输。采用发光二极管做光源。</p>
<p>单模光纤，一次只能传输一个光信号，以近乎直线传播的方式今昔那个传输，损耗较小，输出和输入差异非常小，适合远距离传输。采用定向性很好的激光做光源。</p>
<p>特点：</p>
<p>传输损耗小，中继距离长，对远距离传输特别经济。</p>
<p>抗雷电和电磁干扰性能好</p>
<p>无串音干扰，保密性好，也不易被窃听或截取数据</p>
<p>体积小，中来那个·重量轻 </p>
<p>3.5.1.2.非导向性传输介质<br>自由空间，介质可以是空气、真空、海水等</p>
<p>3.5.1.2.1.无线电波<br>信号会向所有方向传播</p>
<p>较强的穿透能力，可传远距离，广泛用于通信领域</p>
<p>3.5.1.2.2.微波<br>信号沿着固定方向传播</p>
<p>微波通信频率较高、频段范围宽，因此数据率很高</p>
<p>应用于</p>
<p>地面微博接力通信</p>
<p>卫星通信</p>
<p>优：</p>
<p>通信容量大</p>
<p>距离远</p>
<p>覆盖广</p>
<p>广播通信和多址通信</p>
<p>缺：</p>
<p>传播时延长</p>
<p>受气候影响大</p>
<p>误码率较高</p>
<p>成本高</p>
<p>3.5.1.2.3.红外线、激光<br>信号沿着固定方向传播</p>
<p>把要传输的信号分别转换为各自的信号格式，即红外光信号和激光信号，再在空间中传播</p>
<p>3.6.物理层设备<br>3.6.1 - 中继器<br>诞生原因：由于存在损耗，在线路上传输的信号功率会逐渐衰减，衰减到一定程度时将造成信号失真，因此会导致接收错误</p>
<p>功能：对数字信号进行再生和还原，对衰减的信号进行放大，保持与原数据相同，以增加信号传输的距离，延长网络的长度</p>
<p>两端的网络部分是网段，而不是子网，适用于完全相同的两类网络的互联，且两个网段速率要相同</p>
<p>中继器只将任何电缆段上的数据发送到另一段电缆上，仅作用于信号的电气部分，并不管数据中是否有错误数据或不适于网段的数据</p>
<p>两端可以连相同媒体，也可以连不同媒体</p>
<p>两端的网段一定是要同一个协议</p>
<p>5 - 4 - 3 原则：最多只能有5个网段，最多只能有4个中继器，最多只能有3个网段连计算机</p>
<p>3.6.2 - 集线器<br>对信号进行再生放大转发，对衰减的信号进行放大，接着转发到其他所有（除输入端口）处于工作状态的端口上，以增加信号传输的距离，延长网络的长度。不具备信号的定向传送功能，是一个共享式设备</p>
<p>不能分割冲突域，在同一时间只能传输一组信息。如果碰撞需等待一个随机时间再发送</p>
<p>四、数据链路层<br>4.1.基本概念<br>4.1.1 - 专用名词<br>4.1.1.1.结点<br>主机、路由器</p>
<p>4.1.1.2.链路<br>网络中两个结点之间的物理通道，链路的传输介质主要有双绞线、光纤和微波。</p>
<p>有线链路</p>
<p>无线链路</p>
<p>4.1.1.3.数据链路<br>网络中两个节点之间的逻辑通道，把实现控制数据传输协议的硬件和软件加到链路上就构成数据链路。</p>
<p>4.1.1.4.帧<br>链路层的协议数据单元，封装网络层数据报</p>
<p>4.1.2 - 功能<br>为网络层提供服务</p>
<p>无确认，无连接服务</p>
<p>有确认，无连接服务</p>
<p>有确认，面向连接服务</p>
<p>链路管理，即连接地建立、维持、释放（用于面向连接的服务）</p>
<p>组帧</p>
<p>流量控制</p>
<p>差错控制（帧错/位错）</p>
<p>4.2.数据封帧<br>4.2.1 - 封装成帧<br>一段数据的前后部分添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束</p>
<p>首部和尾部包含许多的控制信息，他们的一个重要作用：帧定界（确定帧的界限）。</p>
<p>4.2.2 - 帧同步<br>接收方应当能从接收到的二进制比特流中区分出帧的起始和终止</p>
<p>4.2.3 - 透明传输<br>不管所传的数据是什么样的比特组合，都应当能够在链路上传送。因此链路层就“看不见”有什么妨碍数据传输的东西</p>
<p>当所传递的数据中的比特组合恰巧与某一个控制信息完全一样就必须采取适当的措施，使收方不会将这样的数据误认为使某种控制信息。这样才能保证数据链路层的传输是透明的</p>
<p>4.2.4 - 组帧的四种方法<br>由于字节计数法中的count字段的脆弱性及字符填充法实现上的复杂性和不兼容性，目前使用最普遍的是零比特填充法和违规编码法</p>
<p>4.2.4.1.字符计数法<br>帧首部使用一个计数字段来表名帧内字符数，如521354245这样的话第一个是5，那么就往后读取5个数据，读出21354，再往后遇到2，就继续往后读2个数据，读出45，但是一旦计数字段出现问题，就会导致全部错误。</p>
<p>4.2.4.2.字符填充法<br>当要传输的信息与控制字符发生冲突时，在要传输的数据前加上一个转义字符，如EOT表示结尾，当要传输的数据中也有EOT时，就在要传输的EOT前加上一个ESC，当要传输的数据就是ESC本身时，也要在ESC前加一个ESC</p>
<p>当传送帧是由文本文件组成时（文本文件的字符都是从键盘上输入的，都是ASCII码）不管从键盘上输入什么字符都可以放在帧里传功去，即透明传输</p>
<p>当传送帧是由非ASCII码的文本文件组成时（二进制代码的程序或图像）。就要采用字符填充方法实现透明传输</p>
<p>4.2.4.3.零比特填充法<br>若开始标志为01111110，传输的数据中也有01111110时采取的一种方式</p>
<p>发送端将要传输的数据，每5个1后面加1个0。</p>
<p>接收端在接收到之后逆序删除0</p>
<p>4.2.4.4.违规编码法<br>比如曼彻斯特编码方式，每个码元会有两个波段，要么前高后低，要么前低后高。绝对不会出现两个波段同时高，或者同时低的情况，就可以故意传输错误的编码方式，来代表终止或结束</p>
<p>4.3.差错检测<br>全局性：由于线路本身电气特征所产生的随机噪声（热噪声），是信道固有的，随机存在的。</p>
<p>解决方法 – 提高信噪比来减少避免干扰</p>
<p>局部性：外界特定的短暂原因所造成的冲击噪声，是产生差错的主要原因。</p>
<p>解决办法 – 通常利用编码技术来解决</p>
<p>位错 – 比特位出错 1变成 0，0变成1</p>
<p>帧错</p>
<p>丢失 – 丢帧</p>
<p>重复 – 发送重复帧</p>
<p>失序 – 顺序错乱</p>
<p>检错编码 – 奇偶校验码/循环冗余码CRC</p>
<p>纠错编码 – 海明码</p>
<p>数据链路层编码和物理层编码的数据编码与调制不同。</p>
<p>物理层编码 – 针对的是单个比特，解决传输过程中比特的同步等问题</p>
<p>数据链路层编码 – 针对的是一组比特，它通过冗余码的技术实现一组二进制比特串在传输过程中是否出现了差错</p>
<p>冗余编码<br>在数据发送之前，先按某种关系附加上一定的冗余位，构成一个符合某一规则的码字后再发送。当要发送的有效数据变化时，相应的冗余位也随之变化，使码字遵从不变的规则。接收端根据收到的码字是否仍符合原规则，从而判断是否出错</p>
<p>4.3.1 - 奇偶校验码<br>n-1位信息元，1位校验元</p>
<p>奇校验码 – 1的个数为奇数</p>
<p>偶校验码 – 1的个数为偶数</p>
<p>比如1100101，若要采用奇校验码，就要保证1的个数为奇数，现在已有4个1，为偶数，那我们就要加一个1，使之成为11100101，这样1的个数就是奇数了，若采用偶校验码，就要保证1的个数为偶数，那我们就应该加一个0，使之成为01100101</p>
<p>如果采用奇校验码，发送的时候1的个数为奇数，接收的时候为偶数，那么就检测到出错</p>
<p>检错率为50%，只能检查出奇数个比特错误</p>
<p>若采用奇校验码，发送端发送11100101，接收端收到的数据变化了奇数个比特</p>
<p>如11100100，此时最后一位比特错了，1的个数为4，是偶数，则能检错。</p>
<p>如11100010，此时最后三位比特错了，1的个数为4，是偶数，则能检错</p>
<p>若采用奇校验码，发送端发送11100101，接收端收到的数据变化了偶数个比特</p>
<p>如11100110，此时最后两个比特错了，1的个数为5，是奇数，则不能检错。</p>
<p>如11101010，此时最后四个比特错了，1的个数为5，是奇数，则不能检错。</p>
<p>4.3.2 - 循环冗余码<br>将要传输的数据除以一个数（生成多项式），得到一个余数（FCS帧检验序列/冗余码），将要传输的数据加上冗余码，进行传递。接收端接收到之后，用接收到的数据除以生成多项式，如果余数为零，则表示没有问题</p>
<p>FCS的生成以及接收端CRC检验都是由硬件实现，处理很迅速，因此不会延误数据的传输</p>
<p>4.4.差错纠错<br>4.4.1 - 海明码<br>4.5.流量控制与可靠传输机制<br>较高的发送速度和较低的接收能力不匹配，会造成传输出错，因此流量控制也是数据链路层的一项重要工作</p>
<p>链路层的流量控制是点到点的，对方收不下就不回复确认</p>
<p>传输层的流量控制是端到端的，接收端给发送端一个窗口公告</p>
<p>停止-等待协议 – 发送窗口大小 = 1，接收窗口大小 = 1</p>
<p>后退N帧协议（GBN） – 发送窗口大小 &gt; 1，接收窗口 = 1</p>
<p>选择重传协议（SR） – 发送窗口大小 &gt; 1，接收窗口大小 &gt; 1</p>
<p>4.5.1 - 可靠传输<br>发送端发啥，接收端收啥</p>
<p>4.5.2 - 流量控制<br>控制发送速率，使接收方有足够的缓存空间来接收每一个帧</p>
<p>4.5.3 - 滑动窗口<br>解决流量控制 – 收不下就不给确认，想发也发不了</p>
<p>解决可靠传输 – 发送方自动重传</p>
<p>4.5.4 - 停止-等待协议<br>每发完一个帧就停止发送，等待对方的确认，在收到确认后再发送下一个帧</p>
<p>为什么要有停止等待协议<br>除了比特出差错，底层信道还会出现丢包问题</p>
<p>研究停止-等待协议的前提<br>虽然现在常用全双工通信方式，但为了讨论问题方便，仅考虑乙方发送数据，乙方接收数据</p>
<p>因为是在讨论可靠传输的原理，所以并不考虑数据是在哪一个层次上传输的</p>
<p>“停止-等待”就是每发送完一个分组就停止发送，等待对方确认，在收到确认后再发送下一个分组</p>
<p>停止-等待协议有几种应用情况<br>无差错情况&amp;有差错情况</p>
<p>4.5.4.1.数据帧丢失或检测到帧出错<br>发完一个帧后，必须保留它的副本</p>
<p>数据帧和确认必须编号</p>
<p>每发送一个帧就启动一个计时器</p>
<p>超时计时器设置的重传时间应当比帧传输的平均RTT更长一些</p>
<p>如果超过了超时计时器设置的时间，则会进行重传</p>
<p>4.5.4.2.ACK丢失<br>当接收方发送的确认帧丢失</p>
<p>发送方仍然会在超时之后重传</p>
<p>接收方在收到重传的帧之后，将该帧丢弃，并补发确认帧</p>
<p>4.5.4.3.ACK迟到<br>当接收方发送的确认帧丢失</p>
<p>发送方仍然重传</p>
<p>接收方接收到重传的帧之后，将该帧丢弃，并补发确认帧</p>
<p>此时不论发送方先收到哪一个确认帧，都会丢弃重复的确认帧</p>
<p>4.5.4.4.信道利用率<br>发送方在一个发送周期内，有效地发送数据所需地时间占整个发送周期地比率</p>
<p>信道利用率 = （L/C）/T</p>
<p>T，发送周期，从开始发送数据，到收到第一个确认帧为止</p>
<p>L，T内发送L比特数据</p>
<p>C，发送方数据传输率</p>
<p>信道吞吐量 = 信道利用率 * 发送方的发送速率</p>
<p>练习<br>一个信道的数据传输率为4kb/s ，单向传播时延为30ms ，如果使停止-等待协议的信道最大利用率达到80% ，要求的数据帧长度至少为多少</p>
<p>80% = （L/4）/（（L/2）+ 2 × 30 ms）</p>
<p>L=960bit</p>
<p>4.5.5 - 后退N帧协议 – GBN<br>属于流水线技术</p>
<p>发送窗口 – 发送方维持一组连续的允许发送的帧的序号</p>
<p>接收窗口 – 接收方维持一组连续的允许接收帧的序号</p>
<p>4.5.5.1.GBN发送方必须响应的三件事<br>上层的调用 – 上层要发送数据时，发送方会先检查自己的窗口是否已满</p>
<p>如果未满，则产生一个帧并继续发送。</p>
<p>如果窗口已满，发送方只需将数据返回给上层，暗示上层窗口已满。上层等一会儿再发送 – 实际中，发送方可以缓存这些数据，窗口不满时再发送帧</p>
<p>收到了一个ACK</p>
<p>GBN协议中，对n号帧的确认采用累计确认的方式，表明接收方已经收到n号帧和它之前的全部帧</p>
<p>超时事件</p>
<p>协议的名字为后退/回退n帧，来源于出现丢失和时延过长帧时发送方的行为。就像在停止-等待协议中一样，定时器将再次用于恢复数据帧或确认帧的丢失。**如果出现超时，发送方重传所有以发送但未被确认的帧。</p>
<p>4.5.5.2.GBN接收方要做的事<br>如果正确收到n号帧，并且按序，那么接收方为n帧发送一个ACK，并将该帧中的数据部分交给上层</p>
<p>其余情况都丢弃帧，并为最近按序接收的帧重新发送ACK。接收方无需缓存任何失序帧，只需要维护一个信息：expectedseqnum – 下一个按序接收的帧序号</p>
<p>4.5.5.3.滑动窗口长度<br>如果采用n个比特对帧编号，那么发送窗口的尺寸WT应满足：1 小于等于 WT 小于等于 2n -1.应为发送窗口尺寸过大，就会使得接收方无法区别新帧和旧帧</p>
<p>4.5.5.4.GBN协议重点总结<br>累计确认</p>
<p>接收方只按顺序接收帧，不按序则无情丢弃</p>
<p>确认序列号最大的、按序到达的帧</p>
<p>发送窗口最大为 2n -1，接收窗口大小为1</p>
<p>4.5.5.5.GBN协议性能分析<br>因连续发送数据帧而提高了信道利用率</p>
<p>在重传时必须把原来已经正确传送的数据帧重传，使传送效率降低</p>
<p>4.5.6 - 选择重传协议 – SR<br>4.5.6.1.SR发送方要做的事<br>上层的调用 – 从上层收到的数据后，SR发送方检查下一个可用于该帧的序号</p>
<p>如果序号位于发送窗口内，则发送数据帧</p>
<p>否则像GBN一样，要么缓存数据，要么将数据返回给上层</p>
<p>收到了一个ACK</p>
<p>如果收到ACK，加入该帧序号在窗口内，则SR发送方将那个被确认的帧标记为已接收。如果该帧序号是窗口的下届，则窗口向前移动到具有最小序号的未确认帧出。如果窗口移动了，并且有序号在窗口内的未发送帧，则发送这些帧</p>
<p>超时事件</p>
<p>每个帧都有自己的定时器，一个超时事件发生后只重传一个帧</p>
<p>4.5.6.2.SR接收方要做的事<br>SR接收方将确认一个正确接收的帧而不管其是否按顺序。失序的帧将被缓存，并返回给发送方一个该帧的确认帧【收到谁确认谁】，知道所有帧（即序号更小的帧）都被收到位置，这时才可以将一批帧按序交付给上层，然后向前移动滑动窗口</p>
<p>4.5.6.3.滑动窗口的长度<br>发送窗口最好等于接收窗口</p>
<p>WTmax = WRmax = 2(n-1)</p>
<p>4.5.6.4.SR协议重点总结<br>对数据帧逐一确认，收一个，确认一个</p>
<p>只重传出错帧</p>
<p>接收方有缓存</p>
<p>WTmax = WRmax = 2(n-1)</p>
<p>4.6.信道划分/介质访问控制<br>4.6.1 - 传输数据使用的两种链路<br>点对点链路<br>两个相邻结点通过一个链路相连，没有第三者。</p>
<p>应用：</p>
<p>PPP协议</p>
<p>常用于广域网</p>
<p>广播式链路<br>所有主机共享通信介质</p>
<p>应用：</p>
<p>早期的总线以太网</p>
<p>无线局域网</p>
<p>常用于局域网</p>
<p>典型的拓扑结构：</p>
<p>总线型</p>
<p>星型（逻辑总线型）</p>
<p>4.6.2 - 介质访问控制<br>MAC – Multiple Access Contorl</p>
<p>采取一定的措施，使得两对结点之间的通信不会发生互相干扰的情况</p>
<p>4.6.2.1.静态划分信道<br>信道划分介质访问控制 </p>
<p>基于多路复用技术划分资源</p>
<p>网络负载重 – 共享信道效率高，且公平</p>
<p>网络负载轻 – 共享信道效率低</p>
<p>常用技术：</p>
<p>频分多路复用FDM</p>
<p>时分多路复用TDM</p>
<p>波分多路复用WDM</p>
<p>码分多路复用CDM</p>
<p>4.6.2.2.动态分配信道<br>轮询访问介质访问控制//轮流协议 – 令牌传输协议，既要不产生冲突，又要发送时占全部带宽</p>
<p>随机访问介质访问控制 – 用户根据意愿随机发送信息，发送信息时可独占信道带宽</p>
<p>网络负载重 – 产生冲突开销</p>
<p>网络负载轻 – 共享信道率高，单个结点可利用信道全部带宽</p>
<p>分类：</p>
<p>ALOHA协议</p>
<p>CSMA协议</p>
<p>CSMA/CD协议</p>
<p>CSMA/CA协议</p>
<p>4.6.3 - 信道划分介质访问控制<br>将使用介质的每个设备与来自同一信道上的其他设备的通信隔离开，把时域和频域资源合理地分配给网络上的设备</p>
<p>多路复用技术<br>把多个信号组合在一条物理信道上进行传输，使得多个计算机或终端设备共享信道资源，提高信道利用率</p>
<p>把一条广播信道，逻辑上分成几条用于两个结点之间通信地，互不干扰地子信道，实际就是把广播信道转变为点对点信道</p>
<p>4.6.3.1.频分多路复用FDM<br>用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。频分复用的所有用户在同样时间占用不同的带宽（频率带宽）资源</p>
<p>充分利用传输介质带宽，系统效率较高，由于技术比较成熟，实现起来也就比较容易</p>
<p>4.6.3.2.时分多路复用TDM<br>将时间划分为一段段等长的时分复用帧。每一个时分复用的用户在每一个TDM帧中占用固定序号的时隙，所有用户轮流占用信道</p>
<p>频分复用 – 并行</p>
<p>时分复用 – 并发</p>
<p>改进的时分复用 – 统计时分复用STDM</p>
<p>每一个STDM帧中的时隙数小于连接在集中器上的用户数。各用户有了数据就随时发往集中器的输入缓存，然后集中器按顺序一次扫描输入缓存，把缓存中的输入数据放入STDM帧中，一个STDM帧满了就发出STDM帧不是固定分配时隙，二十按需动态分配时隙</p>
<p>4.6.3.3.波分多路复用WDM<br>就是光的频分多路复用，在一根光纤中传输多种不同波长（频率）的光信号，由于波长（频率）不同，所以各路光信号互不干扰，最后再用波长分解复用器将各路波长分解出来。</p>
<p>4.6.3.4.码分多路复用CDM<br>码分多址CDMA<br>是码分复用的一种方式</p>
<p>1 个比特分为多个码片/芯片，每一个站点被指定一个唯一的 m 位的芯片序列</p>
<p>比如 1 对应的是 ( +1，-1，-1，+1，+1，+1，+1，-1 )，则 0 所对应的就是各个位取反，即取反码</p>
<p>如何使多个站点发送数据时不会相互干扰 – 要求各个站点芯片序列相互正交（对应位相乘，然后再相加，最后除以芯片序列的位数）</p>
<p>如何合并 – 各个数据再信道中被线性相加（即各个位对应相加）</p>
<p>如何分离 – 合并的数据和源站（芯片序列）规格化内积（对应位相乘，然后再相加，最后除以芯片序列的位数）</p>
<p>4.6.4 - 随机访问介质访问控制<br>4.6.4.1 ALOHA协议<br>纯ALOHA协议<br>不监听信道，不按时间槽发送，随即重发 。想发就发</p>
<p>如何检测冲突 – 如果发生冲突，接收方就在检测出错，然后不予确认，发送方再一定时间内收不到确认就判断发生冲突</p>
<p>冲突r如何解决 – 超时后等一随机时间再重传</p>
<p>时隙ALOHA协议<br>把时间分成若干个相同的时间片，所有用户在时间片开始时刻同步接入网络信道，若发生冲突，则必须等到下一个时间片开始时刻再发送，控制想发就发的随意性</p>
<p>纯ALOHA协议比时隙ALOHA吞吐量更低，效率更低。</p>
<p>纯ALOHA协议想发就发，时隙ALOHA只有在时间片的开始才能发</p>
<p>4.6.4.2 - CSMA协议<br>载波侦听多路访问协议（carrier sense multiple access）</p>
<p>CS：载波侦听，每一个站在发送数据前要检测一下总线上是否有其他计算机在发送数据</p>
<p>当几个站同时在总线上发送数据时，总线上的信号电压摆动值将会增大（相互叠加）。当一个站检测到的信号电压摆动值超过一定门限值时，就认为总线上至少有两个站同时在发送数据，表明发生了碰撞，即发生了冲突。</p>
<p>MA：多点接入，表示许多计算机以多点接入的方式连接在一根总线上</p>
<p>协议思想<br>发送帧之前，监听信道</p>
<p>监听结果：</p>
<p>信道空闲 – 发送完整帧</p>
<p>信道忙 – 推迟发送</p>
<p>1 - 坚持CSMA<br>1-坚持指的是对于监听信道忙之后的坚持</p>
<p>如果一个主机要发送消息，那么它先监听信道</p>
<p>空闲则直接传输，不必等待</p>
<p>信道忙则一直监听，直到空闲，马上传输</p>
<p>如果有冲突，则等待一个随机长的时间再监听，重复上述过程。</p>
<p>优点 – 只要媒体空闲，站点马上就能发送，避免了媒体利用率的损失</p>
<p>缺点 – 假如有两个或两个以上的站点有数据要发送，冲突就不可避免</p>
<p>CSMA非坚持<br>非坚持指的是对于监听信道忙之后就不再继续监听</p>
<p>如果一个主机要发送消息，那么它先监听信道</p>
<p>空闲则直接传输，不必等待</p>
<p>忙则等待一个随机的时间之后再进行监听</p>
<p>优点 – 采取随机的重发延迟时间可以减少冲突发生的可能性</p>
<p>缺点 – 可能存在大家都在延迟等待过程中，使得媒体仍可能处于空闲状态，媒体使用率降低</p>
<p>CSMA P-坚持<br>P-坚持指的是对于监听信道空闲的处理</p>
<p>如果一个主机要发送消息，那么它先监听信道</p>
<p>空闲则以P概率直接传输，不必等待，概率 1 - P等待到下一个时间槽再传输</p>
<p>忙则等待一个随机的时间之后再进行监听</p>
<p>优点 – 技能想非坚持算法那样减少冲突，又能像坚持算法那样减少媒体空闲时间的这种方案</p>
<p>缺点 – 发送冲突后还是要坚持把数据帧发送完，造成了浪费</p>
<p>4.6.4.3 - CSMA/CD<br>载波监听多点接入/碰撞检测（carrier sense multiple access with collision detection）</p>
<p>CS– 载波侦听，每一个站在发送数据之前以及发送数据时都要检测一下总线上是否有其他计算机在发送数据</p>
<p>MA– 多点接入，表示许多计算机以多点接入的方式连接在一根总线上 – 说明该协议应用于总线型</p>
<p>CD– 碰撞检测，边发送边监听，适配器边发送数据，边检测信道上信号电压的变化情况，以便判断自己在发送数据时其他站是否也在发送数据 – 说明该协议应用于半双工网络</p>
<p>如何确定基本退避时间<br>确定基本退避时间为争用期 2t</p>
<p>定义参数k，它等于重传次数，但k不超过10。最多为10，重传次数超过10，k也是10</p>
<p>从离散的整数集合 [ 0, 1, ···, 2k - 1 ] 中随机取出一个数 r，重传所需退避时间就是r 倍的基本退避时间，即2rt</p>
<p>当重传达16次仍不能成功，则说明网络太拥挤，认为此帧永远无法正确发出，抛弃此帧冰箱高层报告出错</p>
<p>最小帧长<br>因为CSMA/CD的诞生就是为了在发送中，出现碰撞能及时叫停，所以如果帧太短，在发完之后才检测到碰撞就会出问题，所以就有了最小帧长的概念</p>
<p>帧的传输时延至少要两倍于信号在总线中的传播时延</p>
<p>（帧长）/数据传输速率 &gt;= 2t</p>
<p>最小帧长 = 总线传播时延 × 数据传输速率 × 2 = 2t × 数据传输速率</p>
<p>另有 – 以太网规定，最短帧长为 64B ，凡是长度小于这个值的都是由于冲突而异常终止的无效帧</p>
<p>4.6.4.4 - CSMA/CA<br>载波侦听多点接入/碰撞避免（carrier sense multiple access with collision avoidance）</p>
<p>应用于无线局域网</p>
<p>工作原理<br>发送之前先检测信道是否空闲</p>
<p>空闲则发出RTS(request to end)，RTS包括发射端的地址、接收端的地址、下一份数据将持续发送的时间等信息，信道忙则等待</p>
<p>接收端接收到RTS后将相应响应CTS（clear to send）。</p>
<p>发送方收到CTS后，开始发送数据帧（同时预约信道，发送方告诉其他站点，自己要传多久数据）</p>
<p>接收端收到数据帧后，将采用CRC来检验数据是否正确，正确则响应ACK</p>
<p>发送方收到ACK就可以进行下一个数据帧的发送，若没有则一直重传至规定重发次数为止（采用二进制指数规避算法来确定随机的推迟时间）</p>
<p>CSMA/CDVSCSMA/CA<br>相同点：都从属于CSMA思路，核心是先听再发，都会进行有限的重传</p>
<p>不同点：</p>
<p>传输介质不同 </p>
<p>CD用于总线式以太网</p>
<p>CA用于无线局域网</p>
<p>载波检测方式不同</p>
<p>CD通过电缆中电压的变化来检测，当数据发生碰撞时，电缆中的电压就会随着发生变化</p>
<p>CA采用能量检测（ED）、载波检测（CS）和能量载波混合检测，三种检测信道空闲的方式</p>
<p>解决方式不同</p>
<p>CD是检测冲突</p>
<p>CA是避免冲突</p>
<p>4.6.5 - 轮询访问介质访问控制<br>4.6.5.1.轮询协议<br>主节点会轮流邀请从属结点发送数据</p>
<p>缺点：</p>
<p>轮询开销</p>
<p>等待延迟</p>
<p>单点故障</p>
<p>4.6.5.2.令牌传输协议<br>令牌 – 一个特殊格式的MAC控制帧，不包含任何信息。</p>
<p>可以控制信道的使用，确保同一时刻只有一个结点独占信道，不会发生碰撞。</p>
<p>每个节点都可以在一定时间内获得发送数据的权利，并不是无限制的持有令牌</p>
<p>应用于令牌环网 – 物理上星型，逻辑上环型</p>
<p>常用于负载较重、通信量较大的网络</p>
<p>缺点：</p>
<p>令牌开销</p>
<p>等待延迟</p>
<p>单点故障 </p>
<p>4.7.局域网的基本概念和体系结构<br>Local Area Network简称LAN，是指在某一区域内有多台计算机互联成的计算机组，使用广播信道</p>
<p>决定居于要的主要要素 – 拓扑结构、传输介质、介质访问控制方法</p>
<p>4.7.1 - 特点<br>覆盖范围小，只在一个相对独立的局部范围内互联，如一座或集中的建筑群</p>
<p>使用专门铺设的传输介质（双绞线、同轴电缆）进行联网，数据传输率高（10Mb/s ~ 10Gb/s）</p>
<p>通信延迟时间短，误码率低，可靠性高</p>
<p>各个站点之间平等关系，共享传输信道</p>
<p>多采用分布式控制和广播式通信，能进行广播和组播</p>
<p>4.7.2 - 局域网拓扑结构<br>4.7.2.1.星型拓扑<br>中心结点是控制中心任意两个结点间的通信最多只需要两步</p>
<p>传输速度快</p>
<p>并且网络构形简单、建网容易、便于控制和管理</p>
<p>但这种网络系统，网络可靠性低，网络共享能力差，有单点故障的问题</p>
<p>4.7.2.2.总线型拓扑<br>网络可靠性高</p>
<p>网络节点间响应速度快</p>
<p>共享资源能力强</p>
<p>设备投入量少、成本低、安装使用方便</p>
<p>当某个站点出现问题对整个网络系统影响小</p>
<p>4.7.2.3.环形拓扑<br>系统中通信设备和线路比较节省</p>
<p>有单点故障问题</p>
<p>由于环路是封闭的，所以不便于扩充</p>
<p>系统响应延时长</p>
<p>信息传输效率相对较低</p>
<p>4.7.2.4.树形结构<br>易于拓展</p>
<p>易于隔离故障</p>
<p>也容易有单点故障</p>
<p>4.7.3 - 局域网的传输介质<br>4.7.3.1.有线局域网<br>常用介质 ：</p>
<p>双绞线</p>
<p>同轴电缆</p>
<p>光纤 </p>
<p>4.7.3.2.无线局域网<br>常用介质：</p>
<p>电磁波</p>
<p>4.7.4 - 局域网的介质访问控制方法<br>4.7.4.1.CSMA/CD<br>常用于总线型局域网，也用于树形网络</p>
<p>4.7.4.2.令牌总线<br>常用于总线型局域网，也用于树形网络</p>
<p>它是把总线型或树形网络中的各个工作站，按着一定的顺序形成一个逻辑环。只有令牌持有者才能控制总线，才有发送信息的权力</p>
<p>4.7.4.3.令牌环<br>用于环型局域网，如令牌环网</p>
<p>4.7.5 - 局域网的分类<br>4.7.5.1.以太网<br>以太网是应用最为广泛的局域网，都符合IEEE 802.3系列标准规范。逻辑拓扑是总线型，物理拓扑是星型或拓展星型，使用CSMA/CD</p>
<p>包括：</p>
<p>标准以太网（10Mbps）</p>
<p>快速以太网（100Mbps）</p>
<p>千兆以太网（1000Mbps）</p>
<p>10G 以太网</p>
<p>4.7.5.2.令牌环网<br>物理上采用星型拓扑结构，逻辑上采用环型拓扑结构</p>
<p>4.7.5.3.FDDI网<br>（Fiber Distributed Data Interface）</p>
<p>物理上采用双环拓扑结构，逻辑上是环型拓扑结构</p>
<p>4.7.5.4.ATM网<br>（Asynchronous Transfer Mode）</p>
<p>较新型的单元交换技术，使用53字节固定长度的单元进行交换</p>
<p>4.7.5.5.无线局域网<br>（Wireless Local Area Network）</p>
<p>采用IEEE 802.11标准</p>
<p>4.7.6 - IEEE802标准<br>是IEEE 802 LAN/MAN标准委员会制定的局域网，城域网技术标准。其中最广泛的有以太网、令牌环网、无线局域网等，这一系列标准中的每一个子标准都由委员会中的一个专门工作组负责</p>
<p>IEEE802.3 – 以太网介质访问控制协议（CSMA/CD）及物理层技术规范</p>
<p>IEEE802.5 – 令牌环网（Token-Ring）的介质访问控制协议及物理层技术规范</p>
<p>IEEE802.8 – 光线技术资讯组，提供有关光纤联网的技术咨询 – 对应FDDI</p>
<p>IEEE802.11 – 无线局域网的介质访问控制协议及物理层技术规范</p>
<p>4.7.7 - MAC子层和LLC子层<br>IEEE802标准所描述的局域网参考模型只对应OSI参考模型的数据链路层和物理层，它将数据链路层划分为逻辑链路子层LLC和介质访问控制子层MAC</p>
<p>4.7.7.1.LLC子层<br>LLC负责识别网络层协议，然后对它们进行封装。LLC报头高数数据链路层，一旦帧被接收到时，应当对数据包如何处理。为网络层提供服务</p>
<p>无确认、无连接</p>
<p>面向连接</p>
<p>带确认、无连接</p>
<p>告诉传送</p>
<p>4.7.7.2.MAC子层<br>MAC子层的存在屏蔽了不同物理链路种类的差异性</p>
<p>主要功能：</p>
<p>数据帧的封装/卸装</p>
<p>帧的寻址和识别</p>
<p>帧的接收与发送</p>
<p>链路的管理</p>
<p>帧的差错控制</p>
<p>4.8.以太网<br>Ethernet时由Xerox、Intel和DEC公司联合开发的基带总线局域网规范，是当今现有局域网采用的最通用的通信协议标准。以太网使用CSMA/CD（载波侦听多路访问/冲突检测）技术</p>
<p>4.8.1 - 优势<br>造假低</p>
<p>是应用最广泛的局域网技术</p>
<p>比令牌环网、ATM网便宜，简单</p>
<p>满足网络速率的要求 – 10Mbps ~ 10Gbps</p>
<p>4.8.2 - 两种标准<br>DIX Ethernet V2：第一个局域网产品（以太网）规约</p>
<p>IEEE802.3：IEEE802委员会802.3工作组指定的第一个IEEE的以太网标准 – 帧格式有一点点改动</p>
<p>4.8.3 - 以太网提供的两种服务<br>无连接 – 发送方和接收方之间无”握手环节“</p>
<p>不可靠 – 不对发送方的数据帧编号，接收方不向发送方进行确认，差错帧直接丢弃，差错纠正由高层负责。</p>
<p>以太网只实现无差错接收，不实现可靠传输</p>
<p>4.8.4 - 以太网传输介质与拓扑结构的发展<br>从上往下</p>
<p>传输介质</p>
<p>粗同轴电缆</p>
<p>细同轴电缆</p>
<p>双绞线 + 集线器</p>
<p>物理拓扑 </p>
<p>总线型 </p>
<p>星型</p>
<p>逻辑拓扑 – 星型</p>
<p>4.8.5 - 10BASE-T<br>10BASE-T是传送基带信号的双绞线以太网，T表示采用双绞线，现10BASE-T（UTP），传输速率10Mbps</p>
<p>物理上采用星型拓扑，逻辑上总线型，每段双绞线最长为100m</p>
<p>采用曼彻斯特编码</p>
<p>采用CSMA/CD介质访问控制</p>
<p>4.8.6 - 适配器与MAC地址<br>计算机与外界有局域网的连接是通过通信适配器</p>
<p>网络接口板</p>
<p>网络接口卡NIC（network interface card）</p>
<p>适配器上装有处理器和存储器（包括RAM和ROM）</p>
<p>ROM上有计算机硬件地址MAC地址</p>
<p>在局域网中，硬件地址又称物理地址，或MAC地址</p>
<p>MAC – 每个适配器有一个全球唯一的48位二进制地址，前24位代表厂家（由IEEE规定），后24位由厂家自己指定。</p>
<p>4.8.7 - 以太网MAC帧<br>最常用的MAC帧是以太网V2的格式</p>
<p>若IP层给MAC层传了一个IP数据报 [ 46~1500 字节之间 ]</p>
<p>MAC就会在数据报上添加一些东西。在前面添加6位表示目的地址，6位表示源地址，2位表示类型[ 指明网络层使用的什么协议 ]。在末尾添加4位表示FCS[ CRC循环冗余校验 ]。包装完的数据叫做以太网MAC帧，然后将该信息传给物理层</p>
<p>物理层又会在最前面加上8字节前导码，其中前7字节叫前同步码，由1010···10组成，用于作为起始时的测试，第8字节为帧开始定界符最后两位为11，标志下面正式开始传输数据</p>
<p>没有结尾定界符，因为采用曼彻斯特编码，每个码元中间肯定都有变化，当一个数据传输完，在下一个数据到达前会有一段时间没有数据传输，此时电平是没有变化的，以此划分界限</p>
<p>与IEEE802.3的区别<br>802.3 中第三个字段是长度/类型</p>
<p>802.3 中当长度/类型字段值小于0x0600时，数据字段必须装入LLC子层</p>
<p>4.8.8 - 高速以太网<br>速率 &gt;= 100Mbps的以太网成为高速以太网</p>
<p>4.8.8.1.100BASE-T以太网<br>在双绞线上传送100Mb/s基带信号的星型拓扑以太网，仍使用IEEE802.3的CSMA/CD协议。</p>
<p>支持全双工和半双工，可在全双工方式下无冲突工作</p>
<p>4.8.8.2.吉比特以太网<br>在光纤或双绞线上传送1Gb/s信号</p>
<p>支持全双工和半双工，可在全双工方式下无冲突工作</p>
<p>4.8.8.3.10吉比特以太网<br>10吉比特以太网在光纤上传送10Gb/s信号</p>
<p>只支持全双工，无争用问题</p>
<p>4.9.无线局域网<br>IEEE802.11是无线局域网通用的标准，它是由IEEE所定义的无线网络通信的标准</p>
<p>IEEE802.11 – 1997，原始标准（2Mb/s，工作在2.4GHz）</p>
<p>IEEE802.11a – 1999，物理层扩充（54Mb/s，工作在5.2Ghz）</p>
<p>IEEE802.11b – 1999，物理层扩充（11Mb/s，工作在2.4Ghz）</p>
<p>IEEE802.11c – 符合801.D的媒体介入控制层桥接（MAC Layer Bridging）</p>
<p>IEEE802.11d – 根据各国无线电规定做的调整</p>
<p>IEEE802.11e – 对服务器等级（Quality of Service QoS）的支持</p>
<p>IEEE802.11f – 基站的互联星（Inter-Access Point Protocol），2006年2月被IEEE批准撤销</p>
<p>IEEE802.11g – 2003，物理层扩充（54Mb/s，工作在2.4GHz）</p>
<p>IEEE802.11h – 2004，无线覆盖半径的调整，室内和室外信道（5.2GHz频段）</p>
<p>WiFi由IEEE802.11b和IEEE802.11e所定义标准</p>
<p>4.9.1 - 帧头格式<br>2位帧控制 </p>
<p>2位生命周期ID </p>
<p>6位接收端RA – 要接收的基站的 MAC地址</p>
<p>6位发送端TA – 要发送的基站的MAC地址</p>
<p>6位目的地址DA</p>
<p>2位序列控制 </p>
<p>6位源地址SA</p>
<p>功能    To DS    From DS    Address1    Address2    Address3    Address4<br>IBSS    0    0    DA    SA    BSSID    未使用<br>To AP    1    0    BSSID    SA    DA    未使用<br>From AP    0    1    DA    BSSID    SA    未使用<br>WDS    1    1    RA    TA    DA    SA<br>4.9.2 - 无线局域网的分类<br>4.9.2.1.有固定基础设施的无线局域网<br>有固定接入基站AP</p>
<p>当用户传输距离过长，AP还是会通过有线传到接收方的AP，再由那边的AP传信号</p>
<p>4.9.2.2.无固定基础设施的无线局域网的自组织网络<br>没有任何转发器，路由器，基站</p>
<p>每个主机都可以充当主机和路由器的功能</p>
<p>4.10.广域网<br>广域网（Wide Area Network），通常跨接很大的物理范围，所覆盖的范围从几十公里到几千公里，可形成国际性的远程网络</p>
<p>通信子网主要使用分组交换技术。</p>
<p>通信子网可以利用公用分组交换网、卫星通信网和无线分组交换网。</p>
<p>将分布在不同地区的局域网或计算机系统互连起来，达到资源共享的目的。</p>
<p>4.10.1 - PPP协议<br>Point-to-Point Protocol，是目前使用最广泛的数据链路层协议，用户使用拨号电话接入因特网时，一般都使用PPP协议。只支持全双工链路</p>
<p>4.10.1.1.应满足的要求<br>简单 – 对于链路层的帧，无需纠错，无需序号，无需流量控制</p>
<p>封装成帧 – 添加帧定界符</p>
<p>透明传输 – 与帧定界符一样比特组合的数据应该如何处理</p>
<p>异步线路 – 用字节填充</p>
<p>同步线路 – 用比特填充</p>
<p>多种网络层协议 – 封装的IP数据报可以采用多种协议</p>
<p>多种类型链路 – 串行/并行，同步/异步，电/光</p>
<p>差错检测 – 通过CRC循环冗余实现，错误的丢弃</p>
<p>检测连接状态 – 链路是否正常工作</p>
<p>最大传送单元 – 数据部分最大长度MTU</p>
<p>网络层地址协商 – 知道通信双方的网络层地址</p>
<p>数据压缩协商</p>
<p>4.10.1.2.无需满足的要求<br>纠错</p>
<p>流量控制</p>
<p>序号</p>
<p>不支持多点线路</p>
<p>4.10.2 - PPP协议的三个组成部分/功能<br>一个IP数据报封装到串行链路（同步串行/异步串行）的方法</p>
<p>链路控制协议LCP – 建立并维护数据链路连接 [ 身份验证 ]</p>
<p>网络控制协议NCP – PPP可支持多种网络层协议，每个不同的网络层协议都要一个相应的NCP来配置，为网络层协议建立和配置逻辑连接。</p>
<p>4.10.3 - PPP协议帧格式<br>是一种面向字节的协议</p>
<p>开头和结尾都有一个字节的帧界定符，一般为7E</p>
<p>如果在要传输的数据之中也有7E，那么为了实习透明传输，我们会在数据7E的前面插入7D</p>
<p>如果要传输的的数据之中也有7D，也会再在前面插入一个7D</p>
<p>有一字节地址字段，但到目前为止还没有派上用处，暂且用两个FF表示</p>
<p>有一字节控制字段，也是还没有排上作用</p>
<p>有两个字节表示协议 – 标识信息部分是什么</p>
<p>IP数据报</p>
<p>LCP的数据</p>
<p>网络层控制数据</p>
<p>信息部分不超过1500B</p>
<p>有两个字节的FCS用来实现CRC循环冗余校验</p>
<p>4.10.4 - HDLC协议<br>高举数据链路控制（Hihg-Level Data Link Control）</p>
<p>是一个在同步网上传输数据、面向比特的数据链路层协议，是由国际标准化组织(ISO）根据IBM公司的SDLC（SynchronousData Link Control）协议扩展开发而成的</p>
<p>数据报文可以透明传输，用于实现透明的0 比特插入法易于硬件实现</p>
<p>所有帧采用CRC，对信息帧进行顺序编号，可防止漏收或重份，传输可靠性高</p>
<p>4.10.5 - HDLC的站<br>主站<br>主要功能是发送数据（包括数据信息）帧、接收响应帧，并负责对整个链路的控制系统的初启、流程的控制、差错检测或恢复等</p>
<p>从站<br>主要功能是接收由主站发来的命令帧，向主站发送响应帧，并配合主站参与差错恢复等链路控制</p>
<p>复合站<br>主要功能是技能发送，又能接收命令帧和响应帧，并且负责整个链路的控制</p>
<p>三种数据操作方式<br>正常响应方式 – 从站要发送数据，要得到主站的允许</p>
<p>异步响应方式 – 从站不需要得到主站的允许就能发送数据</p>
<p>异步平衡方式 – 各个站点地位平等，比较混乱</p>
<p>4.10.6 - HDLC的帧格式<br>开头和结尾都有8位的帧界定符，一般为7E</p>
<p>采用的透明传输手段是0比特填充法</p>
<p>有8位的地址</p>
<p>正常/异步响应方式 – 填充从站的地址</p>
<p>异步平衡方式 – 填充应答站的地址</p>
<p>有8位的控制</p>
<p>信息帧（I），0开头，用来传输数据信息，或使用捎带技术对数据进行确认。</p>
<p>监督真（S），10开头，用于流量控制和差错控制，执行对信息帧的确认、请求重发和暂停发送等功能</p>
<p>无编号帧（U），11开头，用于提供对链路的建立、拆除等多种控制功能</p>
<p>有16位帧检验序列FCS</p>
<p>PPPVSHDLC<br>相同</p>
<p>都只支持全双工链路</p>
<p>都可以实现透明传输</p>
<p>都可以实现差错检测，但不纠正差错</p>
<p>不同</p>
<p>PPP- 面向字节，HDLC- 面向比特</p>
<p>PPP- 2B协议字段，HDLC- 没有</p>
<p>PPP- 无序号和确认机制， HDLC- 有编号和确认机制</p>
<p>PPP- 不可靠，HDLC- 可靠</p>
<p>4.11.链路层设备<br>4.11.1 - 网桥<br>网桥根据MAC帧的目的地址对帧进行转发和过滤。当网桥收到一个帧时，并不向所有接口转发，二十检查目的MAC地址，然后再确定该帧转发到哪一个接口，或者是把它丢弃（过滤）</p>
<p>4.11.1.1.优点<br>过滤通信量打，增大吞吐量</p>
<p>扩大了物理范围</p>
<p>提高了可靠性</p>
<p>可以互联不同物理层、不同MAC子层和不同速率的以太网</p>
<p>4.11.1.2.透明网桥<br>“透明”指以太网上的站点并不知道所发送的帧经过哪几个网桥，是一种即插即用设备</p>
<p>自学习：</p>
<p>收到信息后，先将看看自己的转发表有没有源地址</p>
<p>如果没有，则记上源地址，并记上从哪个接口接入，方便下次收到要发往该地址时可以直接转发</p>
<p>再在转发表中查找目的地址</p>
<p>如果表中有对应的地址-接口记录，则直接转发，且当记录中的接口就是接收到该信息的接口，则说明不用转发，可以直接丢弃</p>
<p>如果没有对应地址-接口记录，则从其他几个接口广播出去</p>
<p>4.11.1.3.源路由网桥<br>在发送帧时，把详细的最佳路由信息（路由最少/时间最短）放在帧的首部</p>
<p>通过发送试探帧来获取所有可以到达目的端的路径</p>
<p>网段<br>一般指一个计算机网络中使用同一物理层设备（传输介质，中继器，集线器等）能够直接通讯的那一部分</p>
<p>4.11.2 - 以太网交换机<br>是多端口的网桥，基本原理都和网桥是一样的</p>
<p>独占传输媒体带宽</p>
<p>4.11.2.1.直通式交换机<br>查看完目的地址（6B）就立刻转发</p>
<p>延迟小</p>
<p>可靠性低</p>
<p>无法支持具有不同速率的端口的交换</p>
<p>4.11.2.2.存储转发式交换机<br>将帧放入告诉缓存，并检查是否正确，正确则转发，错误则丢弃</p>
<p>延迟大</p>
<p>可靠性高</p>
<p>可以支持具有不同速率的端口的交换</p>
<p>4.11.3 - 冲突域<br>在同一个冲突域中的每一个结点都能收到所有被发送的帧。简单来说就是同一时间内只能有一台设备发送信息的范围</p>
<p>4.11.4 - 广播域<br>网络中能接收任一设备发出的广播帧的所有设备的集合。简单地说，如果站点发出一个广播信号，所有能收大这个信号的范围称为一个广播域</p>
<p>能够隔离冲突域    能否隔离广播域<br>中继器、集线器    不能    不能<br>网桥、交换机    能    不能<br>路由器    能    能<br>五、网络层<br>5.1.数据交换方式<br>5.1.1 - 电路交换<br>建立连接</p>
<p>通信</p>
<p>释放连接</p>
<p>只要建立好，就会有一条固定的路径</p>
<p>独占资源</p>
<p>优点：</p>
<p>通信时延小</p>
<p>有序传输</p>
<p>没有冲突</p>
<p>实时性强</p>
<p>缺点：</p>
<p>建立连接时间长</p>
<p>线路独占、使用效率低</p>
<p>灵活性差</p>
<p>无差错控制能力</p>
<p>5.1.2 - 报文交换<br>报文：源应用发送的信息整体</p>
<p>优点：</p>
<p>无需建立连接</p>
<p>存储转发，动态分配线路</p>
<p>线路可靠性较高</p>
<p>线路利用率较高</p>
<p>多目标服务</p>
<p>缺点：</p>
<p>有存储转发时延</p>
<p>报文大小不定，需要网络节点有较大的缓存空间</p>
<p>5.1.3 - 分组交换<br>分组 – 把大的数据块分割成小的数据块</p>
<p>优点：</p>
<p>无需建立连接</p>
<p>存储转发，动态分配线路</p>
<p>线路可靠性较高</p>
<p>线路利用率较高</p>
<p>相对报文交换，存储管理更容易</p>
<p>缺点：</p>
<p>有存储转发时延</p>
<p>需要传输额外的信息量</p>
<p>乱序到目的主机时，要对分组排序重组</p>
<p>报文交换和分组交换都采用存储转发</p>
<p>传送数据量大，且传送时间远大于呼叫时，选择电路交换。电路交换传输时延最小</p>
<p>从信道利用率上看，报文交换和分组交换由于电路交换，其中分组交换时延更小</p>
<p>5.1.3.1.数据报交换<br>为网络层提供无连接服务</p>
<p>无连接服务 – 不事先为分组的传输确定传输路径，每个分组独立确定传输路径，不同分组传输路径可能不同</p>
<p>每个分组携带源和目的地址</p>
<p>路由器根据分组的目的地址转发分组：基于路由协议/算法构建转发表，检索转发表，每个分组独立选路</p>
<p>5.1.3.2.虚电路交换<br>为网络层提供连接服务</p>
<p>连接服务 – 首先为分组的传输确定传输路径（建立连接），然后沿该路径（连接）传输系列分组，系列分组传输路径相同，传输结束后</p>
<p>是将数据报交换和电路交换结合，以发挥两者优点</p>
<p>虚电路 – 一条源主机到目的主机类似于电路的路径（逻辑连接）路径上所有节点都要维持这条虚电路的建立，都维持一张虚电路表，每一项记录了一个打开的虚电路信息</p>
<p>建立连接（虚电路建立） – 每个分组携带虚电路号，而非目的地址。源主机发送呼叫请求分组并受到呼叫应答分组后才算建立连接</p>
<p>数据传输 – 全双工通信</p>
<p>释放连接（虚电路释放） – 源主机发送释放请求分组以拆除虚电路</p>
<p>数据报服务    虚电路<br>建立连接    不要    必须有<br>目的地址    每个分组都有完整的目的地址    尽在建立连接阶段使用，之后每个分组使用长度较短的虚电路号<br>路由选择    每个分组独立地进行路由选择和转发    属于同一条虚电路的分组按照同一路由转发<br>分组顺序    不保证分组的有序到达    保证分组的有序到达<br>可靠性    不保证可靠通信，可靠性由用户主机来保证    可靠性由网络保证<br>对网络故障的适应性    出故障的结点丢失分组，其他分组路径选择发生变化，可正常传输    所有经过故障节点的虚电路均不能正常工作<br>差错处理和流量控制    有用户主机进行流量控制，不保证数据报的可靠性    可由分组交换网负责，也可由用户主机负责<br>5.1.4 - 传输名词<br>应用层的是报文</p>
<p>传输层将应用层大的报文分成报文段</p>
<p>网络层将报文/报文段封装成IP数据报，分组</p>
<p>数据链路层将IP数据报/分组封装成帧</p>
<p>物理层将帧转成比特流</p>
<p>5.2.IP数据报格式<br>总长度不超过1420B</p>
<p>首部</p>
<p>固定部分 – 20B</p>
<p>1-4B</p>
<p>0-3b – IP版本</p>
<p>4-7b – 首部长度，将其转为十进制，乘上单位4B，得到的多少字节，就是首部的长度，如0101,是5，最后算出来的20B就是首部长度，并且最小是5</p>
<p>8-15b – 指期望获得哪种类型的服务，优先级啥的</p>
<p>16-31b – 首部加上数据部分的总长度，换算方法和首部长度是一样的，只不过单位就是1B</p>
<p>5-8B</p>
<p>0-15b – 标识 – 同一数据报的分片使用同一个标识</p>
<p>16-18b – 标志 – 只有两位有意义，</p>
<p>第1位目前做保留</p>
<p>第2位叫DF，Don’t Fragment</p>
<p>DF = 1，禁止分片</p>
<p>DF = 2，允许分片</p>
<p>第3位叫MF，More Fragment</p>
<p>MF = 1，后面还有分片</p>
<p>MF = 0，代表最后一片/后面没有分片</p>
<p>19-31b – 片偏移 – 指出较长分组 分片后，某片在原分组中的相对位置，单位是8B</p>
<p>9-12B</p>
<p>0-7b – 生存时间TTL：IP分组的保质期。经过一个路由器-1，变成 0 则丢弃</p>
<p>8-15b – 协议，指数据部分使用的传输层的哪个协议</p>
<p>ICMP - 1</p>
<p>IGMP - 2</p>
<p>TCP - 6</p>
<p>EGP - 8</p>
<p>IGP - 9</p>
<p>UDP - 17</p>
<p>IPv6 - 41</p>
<p>ESP - 50</p>
<p>OSPF - 89</p>
<p>16-31b – 首部检验和，只检验首部</p>
<p>13-16B</p>
<p>0-31b – 源地址</p>
<p>17-20B</p>
<p>0-31b – 目的地址</p>
<p>可变部分</p>
<p>可选字段，0~40B，可有可无，用来支持排错、测量以及安全等措施</p>
<p>填充字段，全0，把首部4B的整数倍</p>
<p>数据部分 – TCP、UDP</p>
<p>5.3.IPv4地址<br>5.3.1 - 特殊IP地址<br>NetID    HostID    作为IP分组源地址    作为IP分组目的地址    用途<br>全 0    全 0    可以    不可以    表示本网范围内表示主机，路由表中表示默认路由<br>全 0    特定值    不可以    可以    表示本网内某个特定主机<br>全 1    全 1    不可以    可以    表示本网广播地址（路由器不转发）<br>特定值    全 0    不可以    不可以    表示网络地址，一个网络<br>特定值    全 1    不可以    可以    表示直接广播地址，对特定网络上的所有主机进行广播<br>任何数（非全0/1）    可以    可以    用于本地软件环回测试，称为环回地址<br>5.3.2 - 私有IP地址<br>地址类别    地址范围    网段个数<br>A    10.0.0.0 ~ 10.255.255.255    1<br>B    172.16.0.0 ~ 172.31.255.255    16<br>C    192.168.0.0 ~ 192.168.255.255    256<br>5.4.网络地址转换NAT<br>Network Address Translation</p>
<p>在专用网连接到因特网的路由器上安装NAT软件，安装了NAT软件的路由器叫做NAT路由器，它至少有一个有效的外部全球IP地址</p>
<p>在WAN端有该接口的IP地址和端口两个东西，</p>
<p>在LAN端有各个设备的IP地址和端口号</p>
<p>每个WAN端口对应LAN中的一个IP地址、端口号</p>
<p>5.5.子网掩码<br>5.6.无分类编址CIDR<br>消除了传统的A类，B类和C类地址以及划分子网的概念</p>
<p>融合子网地址与子网掩码，方便子网划分</p>
<p>5.6.1 - 构成超网<br>将多个子网聚合成一个较大的子网，叫做构成抄网，或路由聚合 – 将网络前缀缩短</p>
<p>5.6.2 - 最长前缀匹配<br>使用CIDR时，查找路由表可能得到几个匹配结果，应该选择具有最长网络前缀的路由。前缀越长，地址块儿越小，路由越具体</p>
<p>5.7.ARP协议<br>由于在实际网络的链路上传送数据帧时，最终必须使用MAC地址，所以就有了ARP协议</p>
<p>完成主机或路由器IP地址到MAC地址的映射 – 解决下一跳走哪儿的问题</p>
<p>ARP协议使用过程 – 检查ARP高速缓存，有对应表项则写入MAC帧，没有则用目的MAC地址位FF-FF-FF-FF-FF-FF-FF的帧封装并广播ARP请求分则，同一局域网中所有主机都能收到该请求。目的主机收到请求后就会向源主机单播一个ARP响应分组，源主机收到后将此映射写入ARP缓存 – 10~20min更新一次</p>
<p>ARP协议4种典型情况</p>
<p>主机A发给本网络上的主机B – 用ARP找到主机B的硬件地址</p>
<p>主机A发给另一网络上的主机B – 用ARP找到本网络上一个路由器（网关）的硬件地址</p>
<p>路由器发给本网络的主机A – 用ARP找到主机A的硬件地址</p>
<p>路由器发给另一网络的主机B – 用ARP找到本网络上的一个路由器硬件地址</p>
<p>ARP协议自动进行</p>
<p>5.8.DHCP协议<br>动态主机配置协议DHCP是应用层协议，使用客户机/服务器方式，客户端和服务端通过广播方式进行交互，基于UDP。DHCP    是体统即插即用联网机制，主机可以从服务器动态获取IP地址、子网掩码、默认网关、DNS服务器与IP地址，允许地址重用，支持移动用户加入网络，支持在用地址续租</p>
<p>主机广播DHCP发现报文</p>
<p>DHCP服务器广播DHCP提供报文</p>
<p>主机广播DHCP请求报文</p>
<p>DHCP服务器广播DHCP确认报文</p>
<p>5.9.ICMP网际控制报文协议<br>5.9.1 - ICMP差错报文<br>5.9.1.1.应该发送报文的情况<br>终点不可达 – 当路由器或主机不能交付数据包时就向源点发送终点不可达报文</p>
<p>源点抑制 – 当路由器或主机由于拥塞而丢弃数据报时，就向源点发送源点抑制报文，使源点知道应当把数据报的发送速率放慢</p>
<p>时间超过 – 当路由器收到生存时间TTL= 0 的数据报时，除了丢弃该数据报，还要向源点发送时间超过报文。当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃，并向源点发送时间超过报文</p>
<p>参数问题 – 当路由器或目的主机收到的数据报的首部中有的字段值不正确时，就该丢弃数据报，并向原点发出参数问题报文</p>
<p>改变路由（重定向） – 路由器把改变路由报文发送给主机，让主机知道下次应将数据报发给另外的路由器</p>
<p>5.9.1.2.不应发送报文的情况<br>对ICMP差错报告报文，不再发送ICMP差错报告报文</p>
<p>对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文</p>
<p>对具有组播地址的数据报都不发送ICMP差错报告报文</p>
<p>对具有特殊地址（如127.0.0.0/0.0.0.0）的数据报不发送ICMP差错报告报文</p>
<p>5.9.3 - ICMP询问报文<br>回送请求和回答报文 – 主机或路由器向特定目的主机发出询问，收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文。测试目的站是否可达以及了解其相关状态</p>
<p>时间戳请求和回答报文 – 请某个主机或路由器回答当前日期和时间。用来进行时钟同步和测量时间</p>
<p>掩码地址请求和回答报文</p>
<p>路由器询问和通告报文</p>
<p>5.10.IPv6数据报格式<br>IPv6基本首部40B<br>4位 – 版本号</p>
<p>8位 – 优先级</p>
<p>20位 – 流标签</p>
<p>16位 – 有效载荷长度</p>
<p>8位 – 下一个首部</p>
<p>8位 – 跳数限制</p>
<p>128位 – 源地址</p>
<p>128位 – 目的地址</p>
<p>IPv6有效载荷64KB<br>扩展首部</p>
<p>数据</p>
<p>5.11.IPv4 - IPv6<br>IPv6将地址从32位（4B）扩大到128位（16B），更大的地址空间</p>
<p>IPv6将IPv4的校验和字段彻底移除，以减少每跳的处理时间</p>
<p>IPv6将IPv4的可选字段移除首部，变成了扩展首部，成为灵活的首部格式，路由器通常不对扩展首部进行检查，大大提高了路由器的处理效率</p>
<p>IPv6支持及即插即用（即自动配置），不需要DHCP协议</p>
<p>IPv6首部长度必须是8B的整数倍，而IPv4的首部是4B的整数倍</p>
<p>IPv6只能在主机处分片，IPv4可以在路由器和主机处分片</p>
<p>ICMPv6支持资源的预分配，支持实时视像等要求，保证一定的带宽和时延的使用</p>
<p>IPv6取消了协议字段，改成下一个首部字段</p>
<p>IPv6取消了总长度字段，改用有效载荷长度字段</p>
<p>IPv6取消了服务类型字段</p>
<p>5.12.IPv6基本地址类型<br>单播<br>一对一通信 – 可做源地址 + 目的地址</p>
<p>多播<br>一对多通信 – 可做目的地址</p>
<p>任播<br>一对多中的一个通信 – 可做目的地址</p>
<p>5.13.IPv6向IPv4过渡的策略<br>双栈协议<br>双协议栈技术就是指在一台设备上同时启用IPv4协议栈和IPv6协议栈。这样的话，这台设备既能和IPv4网络通信，又能和IPv6网络通信。如果这台设备是一个Router，那么这台Router的不同接口上，分别配置了IPv4地址和IPv6地址，并很可能分别连接了IPv4网络和IPv6网络。如果这台设备是一个计算机，那么它将同时拥有IPv4地址和IPv6地址，并具备同时处理这两个协议地址的功能</p>
<p>隧道技术<br>通过使用互联网络的基础设施在网络之间传递数据的方式。使用隧道传递的数据（或负载）可以是不同协议的数据帧或包。隧道协议将其他协议的而数据帧或包重新封装然后通过隧道发送。</p>
<p>5.14.路由算法<br>5.14.1 - 静态路由算法<br>非自适应路由算法 – 管理员手工配置路由信息</p>
<p>简便、可靠，在负荷稳定、拓扑变化不大的网络中运行效果很好，广泛用于高度安全性的军事网络和较小的商业网络</p>
<p>路由更新慢，不适用大型网络</p>
<p>5.14.2 - 动态路由算法<br>自适应路由算法 – 路由器之间彼此交换信息，按照路由算法优化出路由表项</p>
<p>路由更新快，使用大型网络，及时响应链路费用或网络拓扑变化 </p>
<p>算法复杂，要增加网络负担</p>
<p>分类：</p>
<p>全局性 – 链路状态路由算法 OSPF- 所有路由器掌握完整的网络拓扑和链路费用信息</p>
<p>分散性 – 距离向量路由算法RIP- 路由器只掌握物理相连的邻居及链路费用</p>
<p>三种路由协议比较<br>RIP是一种分布式的基于向量的内部网关路由选择协议，通过广播UDP报文来交换路由信息</p>
<p>OSPF是一种内部网关协议，要交换的信息量较大，应使报文的长度尽量短，所以不适用传输层协议，二十直接采用IP</p>
<p>BGP是一个外部网关协议，在不同的自治系统之间交换路由信息，由于网络环境复杂，需要保证可靠传输，所以采用TCP</p>
<p>协议    RIP    OSPF    BGP<br>类型    内部    内部    外部<br>路由算法    距离向量    链路状态    路径相连<br>传递协议    UDP    IP    TCP<br>路劲选择    跳数最少    代价最低    较好，非最佳<br>交换节点    相邻路由器    网络中所有路由器    相邻路由器<br>交换内容    当前路由器知道的全部信息，即自己的路由表    与本路由器相邻的所有路由器的链路状态    首次交换整个路由表，之后交换有变化部分<br>5.14.2.1.RIP协议<br>是一种分布式的，基于距离向量的路由选择协议，是因特网的协议标准，最大优点是简单。它要求网络中每一个路由器都维护从它自己到其他每一个目的网络的唯一最佳纪录（即一组距离）</p>
<p>距离 – 通常为跳数，即从源端口到目的端口所经过的路由器个数，经过一个路由器跳数+1.特别的，从一路由器直接连接的网络距离位1，RIP允许一条路由最多只能包含15个路由器，因此距离位16表示网络不可达</p>
<p>交换<br>仅和相邻路由器交换信息</p>
<p>路由器交换的信息是自己的路由表</p>
<p>每30秒交换一次路由信息，然后路由器根据新信息更新路由表。若超过180s没有收到邻居路由器的通告，则判定邻居路由器没了，并更新自己的路由表</p>
<p>路由器刚开始工作时，只知道直接连接的网络的距离（距离为1），接着每一个路由器也只和数目非常有限的相邻路由器交换并更新路由信息</p>
<p>经过若干次更新后，所有路由器最终都会知道到达本自治系统任何一个网络的最短距离和下一跳路由器的地址，即收敛</p>
<p>距离向量算法<br>修改相邻路由器发来的RIP报文中所有表项 – 对地址为x的相邻路由器发来的RIP报文中的所有项目：把“下一跳”字段中的地址改为x，并把所有的“距离”字段+1</p>
<p>对修改后的RIP报文中的每一个项目，进行下列步骤</p>
<p>若下一跳是X，则用收到的项目替换源路由表中的项目</p>
<p>若下一跳不是X，原来距离比X走的距离远则更新，否则不做处理</p>
<p>若180s还没收到相邻路由器X的更新路由表，则把X记为不可达路由器，即把距离设置为16</p>
<p>报文格式<br>RIP是应用层协议，使用UDP传输数据</p>
<p>一个RIP报文最多可包括25个路由，如超过，必须再用一个RIP报文传送</p>
<p>2字节 – 地址族标识符</p>
<p>2字节 – 路由标记</p>
<p>4字节 – 网络地址</p>
<p>4字节 – 子网掩码</p>
<p>4字节 – 下一跳路由器地址</p>
<p>4字节 – 距离（1-16）</p>
<p>5.14.2.2.OSPF协议<br>开放最短路径优先，是因为使用了Dijkstra提出的最短路径算法SPF</p>
<p>OSPF最主要的特征就是使用分布式的链路状态协议</p>
<p>交换<br>使用洪泛法向自治系统内所有的路由器发送信息，即路由器通过输出端口向所有相邻的路由器发送信息，而每一个相邻路由器又再次将此信息发往其所有相邻路由器</p>
<p>发送的信息就是与本路由器相邻的所有路由器的链路状态（本路由器和哪些路由器相邻，以及该链路的度量/代价 – 费用、距离、时延、带宽等）</p>
<p>只有当链路发生变化时，路由器才向所有的路由器洪泛发送信息</p>
<p>最后，所有路由器都能建立一个链路状态数据库，即全网拓扑图</p>
<p>链路状态路由算法<br>每个路由器发现它的邻居结点【HELLO问候分组】，并了解邻居结点的网络地址</p>
<p>设置到它的每个邻居的成本度量metric</p>
<p>构造【DD数据库描述分组】，向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息</p>
<p>如果DD分组中的摘要自己都有，则邻站不做处理，如果有没有的或者是更新的，则发送【LSR链路状态请求分组】，请求自己没有的和比自己更新的信息</p>
<p>收到邻站的LSR分组后，发送【LSU链路状态更新分组】进行更新</p>
<p>更新完毕后，邻站返回一个【LSAck链路状态确认分组】进行确认</p>
<p>使用Dijkstra，根据自己的链路状态数据库构造到其他节点间的最短路径</p>
<p>只要有一个路由器的链路状态发生变化，就会洪泛发送【LSU链路状态更新分组】进行更新。更新完毕后，其他站返回一个【LSAck链路状态确认分组】进行确认</p>
<p>OSPF的区域<br>为了使OSPF能够用于规模很大的网络，OSPF将一个自治系统再划分为若干个更小的范围，叫做区域。每一个区域都有一个32位的区域标识符（用点分十进制表示）。区域也不能太大，在一个区域内的路由器最好不超过200个</p>
<p>OSPF分组<br>直接用IP数据报传送。包括：</p>
<p>IP数据报首部</p>
<p>OSPF分组</p>
<p>OSPF分组首部</p>
<p>类型 1 至类型 5 的OSPF分组</p>
<p>其他特点<br>每 30 分钟，要刷新一次数据库中的链路状态</p>
<p>由于一个路由器的链路状态只涉及到与相邻路由器的连通状态，因而与整个互联网的规模并无直接关系。因此当互联网规模很大时，OSPF协议要比距离向量RIP协议好得多</p>
<p>不存在坏消息传的慢的问题，收敛速度很快</p>
<p>5.14.3 - 分层次的路由选择协议<br>因特网规模很大</p>
<p>许多单位不想让外界知道自己的路由选择协议，但还想炼乳因特网</p>
<p>自治系统AS<br>在单一的技术管理下的一组路由器，而这些路由器使用一种AS内部的路由选择协议和共同的度量以确定分组在该AS内的路由，同时还使用一种AS之间的路由协议以确定在AS之间的路由</p>
<p>一个AS内的所有网路都属于一个行政单位来管辖，一个自治系统的所有路由器在本自治系统内都必须连通</p>
<p>5.14.4 - 路由选择协议<br>内部网关协议IGP<br>在一个AS内使用的</p>
<p>RIP、OSPF</p>
<p>外部网关协议EGP<br>在AS之间使用的</p>
<p>BGP</p>
<p>5.14.4.1.BGP协议<br>当BGP发言人相互交换了网络可达性的信息后，各BGP发言人就根据所采用的策略从收到的路由信息中找出到达各AS的较好路由</p>
<p>交换<br>与其他AS的邻站BGP发言人交换信息</p>
<p>交换的网络可达性的信息，即要到某个网络所要经过的一系列AS</p>
<p>发生变化是更新有变化部分</p>
<p>报文格式<br>BGP是应用层协议，借助TCP传送</p>
<p>BGP协议特点<br>BGP支持CIDR，因此BGP的路由表也就应当包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列。</p>
<p>在BGP刚刚运行时，BGP的邻站是交换整个BGP路由表。但以后只需要在发生变化时更新有变化的部分。这样做对节省网络带宽和减少路由器的处理开销都有好处</p>
<p>BGP-4的四种报文<br>OPEN- 用来与相邻的另一个BGP发言人建立关系，并认证发送方</p>
<p>UPDATE- 通知新路径或撤销源路径</p>
<p>KEEPALIVE- 在无UPDATE时，周期性证实邻站的连通性，也作为OPEN的确认</p>
<p>NOTIFICATION- 报告先前报文差错，也被用于关闭连接 </p>
<p>5.15.IP数据报的三种传输方式<br>5.15.1 - 单播<br>发送数据报到单个目的地，且每发送一份单播报文都使用一个单播IP地址作为目的地址。是点对点传输方式</p>
<p>5.15.2 - 广播<br>发送数据包到同一广播域或子网内的所有设备的一种数据传输方法，是一种点对多点的传输方式</p>
<p>5.15.3 - 组/多播<br>当网络中的某些用户需要特定数据时，组播数据发送者仅发送一次数据，借助组播路由协议，位组播数据包建立组播分发树，被传递的数据到达距离用户端尽可能近的结点后才开始复制和分发，是一种点对多点的传输方式</p>
<p>5.15.3.1.IP组播地址<br>让原设备能够将分组发送给一组设备。属于多播组的设备将被分配一个组播组IP地址（一群共同需求主机的相同标识）</p>
<p>组播地址的范围224.0.0.0~239.255.255.255（D类地址），一个D类地址表示一个组播组。只能用作分组的目的地址。源地址总是单播地址</p>
<p>组播数据报也是尽最大努力交付，不提供可靠交付，应用于UDP</p>
<p>对组播数据报不产生ICMP差错报文</p>
<p>并非所有D类地址都可以作为组播地址</p>
<p>5.15.3.2.硬件组播<br>同单播地址一样，组播IP地址也需要相应的组播MAC地址在本地网络中实际传送帧。组播MAC地址以十六进制值01-00-5E打头，余下的6个十六进制位是根据IP组播地址的最后23位转换得到的</p>
<p>收到的多播数据报的主机，还要再IP层利用软件进行过滤，把不是本主机要接受的数据报丢弃。</p>
<p>5.15.3.3.IGMP协议<br>让路由器知道本局域网上是否有主机参加或退出了某个组播组，使用IP数据报传递报文</p>
<p>某主机要加入组播组时，该主机向组播组的组播地址发送一个IGMP报文，声明自己要成为该组的成员。本地组播路由器收到IGMP报文后，要利用组播路由选择协议把这组成员关系发给因特网上的其他组播路由器</p>
<p>本地组播路由器周期性探询本地局域网上的主机，以便知道这些主机是否还是组播组的成员</p>
<p>只要有一个主机对某个组响应，那么组播路由器就会认为这个组是活跃的。</p>
<p>如果几次探询后没有一个主机响应，组播路由器就认为本网络上的没有次组播组的主机，因此就不再把这组的成员关系发给其他的组播路由器</p>
<p>5.15.3.4.组播路由选择协议<br>目的是找出以源主机为根结点的组播转发树。</p>
<p>构造树可以避免在路由器之间兜圈子</p>
<p>对不同的多播组对应于不同的多播转发数；同一个多播组，对不同的源点也会有不同的多播转发树</p>
<p>组播路由选择协议常使用的三种算法<br>基于链路状态的路由选择</p>
<p>基于距离向量的路由选择</p>
<p>协议无关的组播（稀疏/密集）</p>
<p>5.16.移动IP<br>移动IP技术是移动结点（计算机/服务器等）以固定的网络IP地址，实现跨越你同网段的漫游功能，并保证了基于网络IP的网络权限在漫游过程中不发生任何改变</p>
<p>移动结点 – 具有永久IP地址的移动设备</p>
<p>归属代理（本地代理）– 一个移动结点拥有的就居所称为归属网络，在归属网络中代表移动节点执行移动管理功能的实体叫做归属代理</p>
<p>外部代理（外地代理）– 在外部网络中帮助移动节点完成移动管理功能的实体称为外部代理</p>
<p>永久地址（归属/主地址）– 移动站点在归属网络中的原始地址</p>
<p>转交地址（辅地址）– 移动站点在外部网络使用的临时地址。</p>
<p>5.17.路由器<br>路由器是一种具有多个输入输出端口的专用计算机，其任务是转发分组</p>
<p>路由选择 – 根据所选定的路由选择协议构造出路由表，同时经常或定期的和相邻路由器交换路由信息而不断地更新和维护路由表</p>
<p>路由选择处理机</p>
<p>路由选择协议</p>
<p>路由表</p>
<p>分组转发 – 若收到RIP/OSPF分组等，则把分组送往路由选择处理及，若收到数据分组，则查找转发表并输出</p>
<p>输入端口</p>
<p>输出端口</p>
<p>交换结构 – 根据转发表 [ 由路由表得来 ]对分组进行转发</p>
<p>5.17.1 - 输入端口<br>从线路上接受分组</p>
<p>物理层处理</p>
<p>数据链路层处理</p>
<p>网络层处理 – 分组排队、查表和转发，产生时延</p>
<p>交换结构</p>
<p>输入端口中的查找和转发功能在路由器的交换功能中是最重要的</p>
<p>5.17.2 - 输出端口<br>交换结构</p>
<p>网络层处理 – 分组排队、缓存管理，产生时延</p>
<p>数据链路层处理</p>
<p>物理层处理</p>
<p>向线路发送分组</p>
<p>若路由器处理分组的速率赶不上分组进入队列的速率，则队列的存储空间最终必定减少到零，这就使后面再进入队列的分组由于没有存储空间而只能被丢弃，路由器中的输入或输出队列产生溢出是造成分组丢失的重要原因</p>
<p>5.17.3 - 路由表与路由转发<br>路由表根据路由选择算法得出的，主要用途是路由选择，用软件来实现</p>
<p>目的网络地址</p>
<p>子网掩码</p>
<p>下一跳IP地址</p>
<p>接口</p>
<p>默认路由的目的网络地址和子网掩码都是0.0.0.0</p>
<p>转发表由路由表得来，可用软件实现，也可由特定的硬件来实现。转发表必须包含完成转发功能所必须的信息，在转发表的每一行必须包含从要到达的目的网络到输出端口和某些MAC地址信息的映射</p>
<p>5.18.三层设备的区别<br>路由器 – 可以互联两个不同网络层协议的网段</p>
<p>网桥 – 可以互联两个物理层和链路层不同的网段</p>
<p>集线器 – 不能互联两个物理层不同的网段</p>
<p>六、传输层<br>TCP    UDP<br>传送数据之前必须建立连接，数据传送结束后要释放连接。不提供广播或多播服务。由于TCP要提供可靠的面向连接的传输服务，因此不可避免增加了许多开销 – 确认，流量控制，计时器及连接管理等    传输数据之前不需要建立连接，收到UDP报文后也不需要给出任何确认<br>可靠、面向连接、时延大、适用于大文件    不可靠、无连接、时延小、适用于小文件<br>6.1.传输层的寻址与端口<br>6.1.1 - 复用<br>应用层所有的应用进程都可以通过传输层再传输到网络层</p>
<p>6.1.2 - 分用<br>传输层从网络层收到数据后交付指明的应用进程</p>
<p>6.1.3 - 端口<br>服务端使用端口号</p>
<p>熟知端口号 0~1023 – 给TCP/IP最重要的一些应用程序，让所有用户都知道</p>
<p>FTP– 21</p>
<p>TELNET– 23</p>
<p>SMTP– 25</p>
<p>DNS– 53</p>
<p>TFTP– 69</p>
<p>HTTP– 80</p>
<p>SNMP– 161</p>
<p>登记端口号 1024~49151 – 为没有输指端口号的应用程序使用的</p>
<p>客户端使用的端口号 49152~65535 – 仅在客户进程运行时才动态选择</p>
<p>在网络中采用发送方和接收方的套接字组合来识别端点，套接字唯一标识了网络中的一个主机和它上面的一个进程</p>
<p>套接字Socket = （主机IP地址，端口号）</p>
<p>6.2.UDP协议<br>UDP旨在IP数据报服务之上增加了很少的功能，即复用分用和差错检测功能</p>
<p>UDP是无连接的，减少开销和发送数据之前的时延</p>
<p>UDP使用最大努力交付，即不保证可靠交付</p>
<p>UDP是面向报文的，适合一次性传输少量数据的网络应用</p>
<p>面向报文 – 应用层给UDP多长的报文，UDP就照样发送，即一次发一个完整报文</p>
<p>UDP无拥塞控制，适合很多实时应用</p>
<p>UDP首部开销小，8B，TCP20B</p>
<p>6.2.1 - UDP首部格式<br>16b 源端口号</p>
<p>16b 目的端口号</p>
<p>16b UDP长度 – 指整个UDP用户数据报的长度</p>
<p>16b UDP检验和 – 检测整个UDP数据报是否有错，错就丢弃</p>
<p>分用时，找不到对应目的端口号就丢弃报文，并给发送方发送ICMP“端口不可达”差错报告报文。</p>
<p>6.3.TCP协议<br>是面向连接的协议（虚连接）的传输层协议</p>
<p>每一条TCP连接只能由两个端点，每一条TCP连接只能是点对点的</p>
<p>TCP提供可靠交付的服务，无差错、不丢失、不重复、按序到达（可靠有序，不丢不重）</p>
<p>TCP提供全双工通信。</p>
<p>发送缓存 – 准备发送的数据和以发送但尚未收到确认的数据</p>
<p>接收缓存 – 按序到达但尚未被接受应用程序读取的数据和不按序到达的数据</p>
<p>TCP面向字节流 – TCP把应用程序交下来的数据看成仅仅是一连串的无结构的字节流</p>
<p>流 – 流入到进程或从进程流出的字节序列</p>
<p>6.3.1 - TCP报文首部格式<br>16b 源端口</p>
<p>16b 目的端口</p>
<p>32b 序号 – 在一个TCP连接中传送的字节流中的每一个字节都按序编号，本字段表示本报文段所发送数据的第一个字节的序号</p>
<p>32b 确认号 – 期望收到对方下一个报文段的第一个数据字节的序号。若确认号为N，则证明到序号N-1为止的所有数据都已正确收到</p>
<p>4b 数据偏移 – TCP报文段的数据起始处距离TCP报文段的起始处有多远，以4B为单位，即·个数值是4B</p>
<p>6b 保留</p>
<p>1b URG– URG= 1 时，标明此报文段中有应急数据，是高优先级的数据，应尽快传送，不用在缓存里排队，配合紧急指针字段使用</p>
<p>1b ACK- ACK-=1 时，确认号有效，在连接建立后所有传送报文段都要把ACK置为 1 </p>
<p>1b PSH- PSH= 1 时，接收方尽快交付接收应用进程，不用等到缓存填满再向上交付</p>
<p>1b RST- RST= 1 时，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立传输链接</p>
<p>1b SYN- SYN= 1 时，表明连接是一个连接请求/连接接收报文</p>
<p>1b FIN- FIN= 1 时，表明此报文段发送方数据已发完，要求释放连接</p>
<p>16b 窗口 – 指的是发送本报文段的一方的接收窗口，即现在允许对方发送的数据量</p>
<p>16b 检验和 – 检验首部+数据，检验时要加上12B伪首部，第四个字段为6</p>
<p>16b 紧急指针 – URG= 1 时，指出本报文中紧急数据的字节数</p>
<p>选项 + 填充</p>
<p>6.3.2 - TCP连接管理<br>连接建立 – 采用C/S方式，主动发起连接建立的应用程序叫客户，被动等待连接建立的应用进程叫服务器</p>
<p>客户端发送连接请求报文段，无应用层数据</p>
<p>SYN = 1，seq = x (随机)</p>
<p>服务器为该TCP连接分配缓存和变量，并向客户端返回确认报文段，允许连接，无应用层数据。</p>
<p>SYN = 1，ACK = 1，seq = y (随机)，ack = x + 1</p>
<p>客户端为该TCP连接分配缓存和变量，并向服务器端返回确认的确认，可以携带数据</p>
<p>ACK = 1，seq = x + 1，ack = y + 1</p>
<p>数据传送</p>
<p>连接释放 – 参与一条TCP连接的两个进程中的任何一个都能终止该连接，连接结束后，主机中的“资源”将被释放</p>
<p>客户端发送连接释放报文段，停止发送数据，主动关闭TCP连接</p>
<p>FIN = 1，seq = u</p>
<p>服务器端回复一个确认报文段，客户到服务器这个方向的连接就释放了 – 半关闭状态</p>
<p>ACK = 1，seq = v，ack = u + 1</p>
<p>服务器发完就可以发出连接释放报文段，主动关闭TCP连接</p>
<p>FIN = 1，ACK = 1，seq = w，ack = u + 1</p>
<p>客户端回复一个确认报文段，再等到时间等待计时器设置的2MSL（最大报文段寿命）后，连接彻底关闭</p>
<p>ACK = 1，seq = u + 1，ack = w + 1</p>
<p>6.3.2.1.SYN洪泛攻击<br>SYN洪泛攻击发生在OSI第四层，这种方式利用TCP协议的特性，就是三次握手。攻击者发送TCP SYN，SYN是TCP三次握手中的第一个数据包，而当服务器返回ACK后，该攻击者就不对其进行再确认，那这个TCP连接就处于挂起状态，也就是所谓的半连接状态，服务器收不到再确认的话，还会重复发送ACK给攻击者。这样更加会浪费服务器的资源。攻击者就对服务器发送非常大量的这种TCP连接，由于每一个都没法完成三次握手，所以在服务器上，这些TCP连接会因为挂起状态而消耗CPU和内存，最后服务器可能司机，就无法为正常用户提供服务了。</p>
<p>6.3.3 - TCP可靠传输<br>确认 – 接收方在接收到报文后要回复确认报文，也可以在要传输的数据中携带上确认</p>
<p>重传 – TCP的发送方在规定时间内没有收到确认就要重传以发送的报文段，TCP采用自适应算法，动态改变重传时间RTTs（加权平均往返时间）</p>
<p>校验</p>
<p>序号</p>
<p>冗余ACK（冗余确认）<br>每当比期望序大的失序报文到达时，发送一个冗余ACK，指明下一个下带字节的序号</p>
<p>发送方收到3个对于某个报文的冗余ACK则认定其丢失</p>
<p>6.3.4 - TCP流量控制<br>在通信过程中，接收方根据自己接收缓存的大小，动态地调整发送方地发送窗口大小，即接收窗口rwnd（接收方设置确认报文段地窗口字段来将rwnd通知给发送方），发送方的**发送窗口取接收窗口rwnd和拥塞窗口cwnd的最小值</p>
<p>TCP为每一个连接设有一个持续计时器，只要连接的一方收到对方的零窗口通知，就启动持续计时器</p>
<p>若持续计时器设置的时间到期，就发送一个零窗口探测报文段。接收方收到的探测报文段时给出现在的窗口值</p>
<p>6.3.5 - TCP拥塞控制<br>出现拥塞的条件</p>
<p>对资源需求的总和 &gt; 可用资源</p>
<p>网络中有许多资源同时呈现供应不足 =&gt; 网络性能变坏 =&gt; 网络吞吐量将随输入负荷增大而下降</p>
<p>拥塞控制 – 防止过多的数据注入到网络中</p>
<p>四种算法：</p>
<p>慢开始</p>
<p>拥塞避免</p>
<p>快重传</p>
<p>快恢复</p>
<p>接收窗口 – 接收方根据接收缓存设置的值，并告知给发送方，反映接收方容量</p>
<p>拥塞窗口 – 发送方根据自己估算的网络拥塞程度而设置的窗口值，反映网络当前容量</p>
<p>七、应用层<br>7.1.网络应用模型<br>7.1.1 - 客户/服务器模型<br>Client/Server</p>
<p>服务器 – 提供计算服务的设备</p>
<p>永久提供服务</p>
<p>永久性访问地址/域名</p>
<p>客户机 – 请求计算服务的主机</p>
<p>与服务器通信，使用服务器提供的服务</p>
<p>间歇性接入网络</p>
<p>可能使用动态IP地址</p>
<p>不与其他客户机直接通信</p>
<p>7.1.2 - P2P模型<br>不存在永远在线的服务器</p>
<p>每个主机既可以提供服务，也可以请求服务</p>
<p>任意端系统/节点之间可以直接通讯</p>
<p>节点间歇性接入网络</p>
<p>节点可能改变IP地址</p>
<p>可扩展性好</p>
<p>网络健壮性强</p>
<p>7.2.DNS系统<br>7.2.1 - 域名<br>顶级域名</p>
<p>国家顶级域名</p>
<p>cn，us，uk</p>
<p>通用顶级域名</p>
<p>com，net，org，gov，int，aero，museum，travel</p>
<p>基础结构域名/反向域名</p>
<p>arpa</p>
<p>二级域名</p>
<p>类别域名</p>
<p>ac，com，edu，gov，mil，net，org</p>
<p>行政区域名用于我国各省、自治区、直辖市 </p>
<p>bj，js</p>
<p>7.2.2 - 域名服务器<br>7.2.2.1.根域名服务器<br>掌握各个顶级域名服务器以及对应的IP地址</p>
<p>7.2.2.2.顶级域名服务器<br>管理该顶级域名服务器注册的所有二级域名</p>
<p>7.2.2.3.权限域名服务器<br>负责一个区的域名服务器</p>
<p>7.2.2.4.本地域名服务器<br>当一个主机发出DNS查询请求时，这个查询报文就会发给本地域名服务器，如果本地没有，则访问根域名服务器</p>
<p>7.2.3 - 域名解析过程<br>7.2.3.1.递归查询<br>靠上层域名服务器，由上层域名服务器去找下一步应该做什么</p>
<p>7.2.3.2.迭代查询<br>靠本地域名服务器，上一层域名服务区告诉本地域名服务器下一步该找谁</p>
<p>7.3.FTP文件传输协议<br>7.3.1 - FTP<br>File Transfer Protocol</p>
<p>提供不同种类主机系统（软/硬件体系等都可以不同）之间的文件传输能力，使用TCP实现可靠传输</p>
<p>7.3.1.1.FTP服务器和用户端<br>FTP是基于客户/服务器的协议</p>
<p>用户通过一个客户机程序连接至在远程计算机上运行的服务器程序</p>
<p>依照FTP协议提供服务，进行文件传输的计算机就是FTP服务器</p>
<p>连接FTP服务器，遵循FTP协议与服务器传输文件的电脑就是FTP客户端</p>
<p>7.3.1.2.FTP工作原理<br>登录</p>
<p>ftp地址 用户名 密码</p>
<p>控制连接始终保持 – 端口为 21</p>
<p>数据连接保持一会儿 – 端口为 20</p>
<p>主动方式下（服务器自己告诉客户，自己的端口号），数据端口是20</p>
<p>被动方式下由客户端和服务器自己协商一个大于1024的端口</p>
<p>7.3.1.3.FTP传输模式<br>文本模式</p>
<p>ASCII模式，以文本序列传输数据</p>
<p>二进制模式</p>
<p>Binary模式，以二进制传输数据</p>
<p>7.3.2 - TFTP<br>Trivial File Transfer Protocol</p>
<p>7.4.电子邮件系统<br>使用可靠的TCP连接</p>
<p>信封</p>
<p>内容</p>
<p>首部</p>
<p>收件人</p>
<p>主题</p>
<p>主体</p>
<p>7.4.1 - 组成结构<br>双方各有</p>
<p>用户代理 – 电子邮件客户端软件</p>
<p>撰写</p>
<p>显示</p>
<p>处理</p>
<p>通信</p>
<p>邮件服务器</p>
<p>发送和接收</p>
<p>向发件人报告邮件传输结果</p>
<p>邮件协议</p>
<p>SMTP– 发送</p>
<p>POP3/IMAP– 接收</p>
<p>7.4.2 - SMTP协议<br>规定了在两个互相通信的SMTP进程之间应如何交换信息</p>
<p>负责发送邮件的SMTP进程就是SMTP客户，负责接收邮件的进程就是SMTP服务器</p>
<p>SMTP规定了14条命令和21种应答信息</p>
<p>使用TCP连接</p>
<p>端口号 – 25</p>
<p>工作方式 C/S</p>
<p>7.4.2.1.通信的三个阶段<br>连接建立</p>
<p>邮件发送</p>
<p>连接释放</p>
<p>7.4.2.2.SMTP的缺点<br>不能传送可执行文件或者其他二进制对象</p>
<p>仅限于传送7位ASCII码，不能传送其他非英语国家的文字</p>
<p>服务器会拒绝超过一定长度的邮件</p>
<p>7.4.3 - POP3协议<br>两种工作方式</p>
<p>下载并保留（在服务器）</p>
<p>下载并删除</p>
<p>7.4.4 - IMAP协议<br>网际报文存取协议</p>
<p>比POP3复杂，当用户在PC上的IMAP客户程序打开IMAP服务器的邮箱时，用户可以看到邮箱的首部，若用户需要打开某个邮件，该邮件才上传到用户的计算机上。</p>
<p>可以让用户在不同的地方使用不同的计算机随时上网阅读处理邮件，还允许只读取邮件中的某一部分</p>
<p>7.5.万维网概述<br>World Wide Web是一个大规模的、联机式的信息储藏所/资料空间，是无数个网络站点和网页的集合</p>
<p>7.5.1 - URL的一般形式<br>&lt;协议&gt; : // &lt;主机&gt; : &lt;端口&gt; / &lt;路径&gt;</p>
<p>7.5.2 - HTTP协议<br>定义了浏览器怎样向万维网服务器请求万维网文档，以及服务器怎样把文档传送给浏览器</p>
<p>浏览器分析URL</p>
<p>浏览器向DNS请求解析IP地址</p>
<p>DNS解析出IP地址</p>
<p>浏览器与服务器建立TCP连接</p>
<p>浏览器发出取文件命令</p>
<p>服务器响应</p>
<p>释放TCP连接</p>
<p>浏览器显示</p>
<p>7.5.3 - HTTP的特点<br>HTTP协议是无状态的</p>
<p>采用TCP作为传输层协议，但HTTP本身是无连接的 – 通信双方在交换HTTP报文之前无需建立HTTP连接</p>
<p>连接方式</p>
<p>持久连接</p>
<p>非流水线</p>
<p>流水线</p>
<p>非持久连接</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Cying</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2019/12/21/Network/">http://yoursite.com/2019/12/21/Network/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Network/">Network    </a></div><div class="post_share"><div class="social-share" data-image="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1576944146129&amp;di=228d10d69063226d2ebced963c1f97de&amp;imgtype=jpg&amp;src=http%3A%2F%2Fimg4.imgtn.bdimg.com%2Fit%2Fu%3D1735485149%2C3987070624%26fm%3D214%26gp%3D0.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/12/28/Operating-Systems/"><img class="prev_cover lazyload" data-src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3748567537,1147022048&amp;fm=11&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>Operating-Systems</span></div></a></div><div class="next-post pull_right"><a href="/2019/12/14/Unity-And-Vuforia/"><img class="next_cover lazyload" data-src="https://img-blog.csdnimg.cn/20191214203032844.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>Unity And Vuforia</span></div></a></div></nav></div></div><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2019 By Cying</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/click_heart.js"></script></body></html>